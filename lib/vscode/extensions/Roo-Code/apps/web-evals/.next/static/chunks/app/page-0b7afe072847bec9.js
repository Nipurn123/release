(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1718:(e,r,n)=>{"use strict";n.d(r,{EH:()=>l,_y:()=>a,a3:()=>i,vv:()=>t});let s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),t=e=>s.format(e),i=e=>{let r=Math.floor(e/1e3),n=Math.floor(r/3600),s=Math.floor(r%3600/60),t=r%60,i=[];return n>0&&i.push("".concat(n,"h")),s>0&&i.push("".concat(s,"m")),(t>0||0===i.length)&&i.push("".concat(t,"s")),i.join(" ")},a=e=>e<1e3?e.toString():e<1e6?"".concat((e/1e3).toFixed(1),"k"):e<1e9?"".concat((e/1e6).toFixed(1),"M"):"".concat((e/1e9).toFixed(1),"B"),l=e=>0===e.attempts?"0%":"".concat(((e.attempts-e.failures)/e.attempts*100).toFixed(1),"%")},2978:(e,r,n)=>{Promise.resolve().then(n.bind(n,8387))},4548:(e,r,n)=>{"use strict";n.d(r,{Lt:()=>s.AlertDialog,Rx:()=>s.AlertDialogAction,Zr:()=>s.AlertDialogCancel,EO:()=>s.AlertDialogContent,$v:()=>s.AlertDialogDescription,ck:()=>s.AlertDialogFooter,wd:()=>s.AlertDialogHeader,r7:()=>s.AlertDialogTitle,$n:()=>u.$,uB:()=>x.Command,xL:()=>x.CommandEmpty,L$:()=>x.CommandGroup,G7:()=>x.CommandInput,h_:()=>x.CommandItem,oI:()=>x.CommandList,lG:()=>h.Dialog,Cf:()=>h.DialogContent,Es:()=>h.DialogFooter,L3:()=>h.DialogTitle,rI:()=>v.DropdownMenu,SQ:()=>v.DropdownMenuContent,_2:()=>v.DropdownMenuItem,ty:()=>v.DropdownMenuTrigger,MJ:()=>m.FormControl,zB:()=>m.FormField,eI:()=>m.FormItem,lR:()=>m.FormLabel,C5:()=>m.FormMessage,KF:()=>w,AM:()=>y.Popover,hl:()=>y.PopoverContent,Wv:()=>y.PopoverTrigger,FK:()=>A.ScrollArea,Ap:()=>N.Slider,XI:()=>k.Table,BF:()=>k.TableBody,nA:()=>k.TableCell,nd:()=>k.TableHead,A0:()=>k.TableHeader,Hj:()=>k.TableRow,tU:()=>F.Tabs,j7:()=>F.TabsList,Xi:()=>F.TabsTrigger,TM:()=>S});var s=n(8978),t=n(7093),i=n(4545),a=n(8020),l=n(2447),o=n(8322);let d=(0,l.F)("inline-flex items-center justify-center rounded-sm border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:n,asChild:s=!1,...i}=e,l=s?a.Slot:"span";return(0,t.jsx)(l,{"data-slot":"badge",className:(0,o.cn)(d({variant:n}),r),...i})}var u=n(9301),x=n(6844),h=n(1053);n(3441);var v=n(8510),m=n(1991);n(3849);var p=n(5049),f=n.n(p),g=n(7676),j=n(8365),b=n(1040),y=n(7204);let C=(0,l.F)("px-2 py-1",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-foreground/10 bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"bg-background"}},defaultVariants:{variant:"default"}}),w=i.forwardRef((e,r)=>{let{options:n,onValueChange:s,variant:a,defaultValue:l=[],placeholder:d="Select options",maxCount:u=3,modalPopover:h=!1,className:v,...m}=e,[p,w]=i.useState(l),[A,N]=i.useState(!1),k=e=>{let r=p.includes(e)?p.filter(r=>r!==e):[...p,e];w(r),s(r)},F=()=>{let e=p.slice(0,u);w(e),s(e)},S=i.useRef(new Map),D=i.useRef(""),T=i.useCallback((e,r)=>{var s;if(D.current!==r)for(let{obj:{value:e},score:s}of(D.current=r,S.current.clear(),f().go(r,n,{key:"label"})))S.current.set(e,s);return"all"===e?.01*(S.current.size>1):null!==(s=S.current.get(e))&&void 0!==s?s:0},[n]);return(0,t.jsxs)(y.Popover,{open:A,onOpenChange:N,modal:h,children:[(0,t.jsx)(y.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:r,...m,onClick:()=>{N(e=>!e)},className:(0,o.cn)("flex w-full rounded-sm min-h-9 h-auto items-center justify-between [&_svg]:pointer-events-auto","font-medium border border-input bg-input hover:opacity-80 cursor-pointer",v),children:p.length>0?(0,t.jsx)("div",{className:"flex justify-between items-center w-full",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-1",children:[p.slice(0,u).map(e=>{var r;return(0,t.jsx)(c,{className:(0,o.cn)(C({variant:a})),children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{children:null===(r=n.find(r=>r.value===e))||void 0===r?void 0:r.label}),(0,t.jsx)("div",{onClick:r=>{r.stopPropagation(),k(e)},className:"cursor-pointer",children:(0,t.jsx)(g.A,{className:"size-4 rounded-full p-0.5 bg-accent/5"})})]})},e)}),p.length>u&&(0,t.jsx)(c,{className:(0,o.cn)("text-ring",C({variant:a})),children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{children:"+ ".concat(p.length-u," more")}),(0,t.jsx)("div",{onClick:e=>{e.stopPropagation(),F()},className:"cursor-pointer",children:(0,t.jsx)(g.A,{className:"size-4 rounded-full p-0.5 bg-ring/5"})})]})})]})}):(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mx-auto",children:[(0,t.jsx)("span",{className:"text-muted-foreground mx-3",children:d}),(0,t.jsx)(j.A,{className:"opacity-50 size-4 mx-2"})]})})}),(0,t.jsx)(y.PopoverContent,{className:"p-0 w-[var(--radix-popover-trigger-width)]",align:"start",onEscapeKeyDown:()=>N(!1),children:(0,t.jsxs)(x.Command,{filter:T,children:[(0,t.jsx)(x.CommandInput,{placeholder:"Search",onKeyDown:e=>{if("Enter"===e.key)N(!0);else if("Backspace"===e.key&&!e.currentTarget.value){let e=[...p];e.pop(),w(e),s(e)}}}),(0,t.jsxs)(x.CommandList,{children:[(0,t.jsx)(x.CommandEmpty,{children:"No results found."}),(0,t.jsxs)(x.CommandGroup,{children:[n.map(e=>(0,t.jsxs)(x.CommandItem,{value:e.value,onSelect:()=>k(e.value),className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)(b.A,{className:(0,o.cn)("text-accent group-data-[selected=true]:text-accent-foreground size-4",{"opacity-0":!p.includes(e.value)})})]},e.value)),(0,t.jsx)(x.CommandItem,{value:"all",onSelect:()=>{let e=Array.from(S.current.keys());if(p.length===e.length&&p.sort().join(",")===e.sort().join(",")){w([]),s([]);return}w(e),s(e)},className:"flex items-center justify-between",children:(0,t.jsx)("span",{children:"Select All"})},"all")]})]})]})})]})});w.displayName="MultiSelect";var A=n(2800);n(5945),n(1762);var N=n(962);n(7546);var k=n(655),F=n(1897);function S(e){let{className:r,...n}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,o.cn)("placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-sm px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50","border border-input bg-input",r),...n})}n(5134)},8387:(e,r,n)=>{"use strict";n.d(r,{Runs:()=>w});var s=n(7093),t=n(8923),i=n(8936),a=n(4548),l=n(4545),o=n(4214),d=n.n(o),c=n(6147),u=n(925),x=n(6598),h=n(1040),v=n(8737),m=n(9042),p=n(3401);let f=(0,p.createServerReference)("406a7fa06493390be52f5b81419fd1b27181c5c36b",p.callServer,void 0,p.findSourceMapURL,"deleteRun");var g=n(1718),j=n(6025),b=n(2247);let y=(0,p.createServerReference)("40c46b745adea41e2d75590ba81db8efb51bcceffc",p.callServer,void 0,p.findSourceMapURL,"copyRunToProduction");function C(e){var r;let{run:n,taskMetrics:t}=e,[i,o]=(0,l.useState)(),p=(0,l.useRef)(null),{isPending:C,copyRun:w,copied:A}=function(e){let[r,n]=(0,l.useState)(!1),{isPending:s,mutate:t}=(0,j.n)({mutationFn:()=>y(e),onSuccess:e=>{e.success?(b.oR.success(e.message),n(!0),setTimeout(()=>n(!1),3e3)):b.oR.error(e.error)},onError:e=>{console.error("Copy to production failed:",e),b.oR.error("Failed to copy run to production")}});return{isPending:s,copyRun:t,copied:r}}(n.id),N=(0,l.useCallback)(async()=>{if(i)try{await f(i),o(void 0)}catch(e){console.error(e)}},[i]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{children:n.model}),(0,s.jsx)(a.nA,{children:n.passed}),(0,s.jsx)(a.nA,{children:n.failed}),(0,s.jsx)(a.nA,{children:n.passed+n.failed>0&&(0,s.jsxs)("span",{children:[(n.passed/(n.passed+n.failed)*100).toFixed(1),"%"]})}),(0,s.jsx)(a.nA,{children:t&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{children:(0,g._y)(t.tokensIn)}),"/",(0,s.jsx)("div",{children:(0,g._y)(t.tokensOut)})]})}),(0,s.jsx)(a.nA,{children:(null==t?void 0:null===(r=t.toolUsage)||void 0===r?void 0:r.apply_diff)&&(0,s.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[(0,s.jsx)("div",{children:t.toolUsage.apply_diff.attempts}),(0,s.jsx)("div",{children:"/"}),(0,s.jsx)("div",{children:(0,g.EH)(t.toolUsage.apply_diff)})]})}),(0,s.jsx)(a.nA,{children:t&&(0,g.vv)(t.cost)}),(0,s.jsx)(a.nA,{children:t&&(0,g.a3)(t.duration)}),(0,s.jsx)(a.nA,{children:(0,s.jsxs)(a.rI,{children:[(0,s.jsx)(a.$n,{variant:"ghost",size:"icon",asChild:!0,children:(0,s.jsx)(a.ty,{children:(0,s.jsx)(c.A,{})})}),(0,s.jsxs)(a.SQ,{align:"end",children:[(0,s.jsx)(a._2,{asChild:!0,children:(0,s.jsx)(d(),{href:"/runs/".concat(n.id),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(u.A,{}),(0,s.jsx)("div",{children:"View Tasks"})]})})}),n.taskMetricsId&&(0,s.jsx)(a._2,{onClick:()=>w(),disabled:C||A,children:(0,s.jsx)("div",{className:"flex items-center gap-1",children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.A,{className:"animate-spin"}),"Copying..."]}):A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.A,{}),"Copied!"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.A,{}),"Copy to Production"]})})}),(0,s.jsx)(a._2,{onClick:()=>{o(n.id),setTimeout(()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},0)},children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.A,{}),(0,s.jsx)("div",{children:"Delete"})]})})]})]})})]}),(0,s.jsx)(a.Lt,{open:!!i,onOpenChange:()=>o(void 0),children:(0,s.jsxs)(a.EO,{children:[(0,s.jsxs)(a.wd,{children:[(0,s.jsx)(a.r7,{children:"Are you sure?"}),(0,s.jsx)(a.$v,{children:"This action cannot be undone."})]}),(0,s.jsxs)(a.ck,{children:[(0,s.jsx)(a.Zr,{children:"Cancel"}),(0,s.jsx)(a.Rx,{ref:p,onClick:N,children:"Continue"})]})]})})]})}function w(e){let{runs:r}=e,n=(0,t.useRouter)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.XI,{className:"border border-t-0",children:[(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{children:"Model"}),(0,s.jsx)(a.nd,{children:"Passed"}),(0,s.jsx)(a.nd,{children:"Failed"}),(0,s.jsx)(a.nd,{children:"% Correct"}),(0,s.jsx)(a.nd,{children:"Tokens In / Out"}),(0,s.jsx)(a.nd,{children:"Diff Edits"}),(0,s.jsx)(a.nd,{children:"Cost"}),(0,s.jsx)(a.nd,{children:"Duration"}),(0,s.jsx)(a.nd,{})]})}),(0,s.jsx)(a.BF,{children:r.length?r.map(e=>{let{taskMetrics:r,...n}=e;return(0,s.jsx)(C,{run:n,taskMetrics:r},n.id)}):(0,s.jsx)(a.Hj,{children:(0,s.jsxs)(a.nA,{colSpan:9,className:"text-center",children:["No eval runs yet.",(0,s.jsx)(a.$n,{variant:"link",onClick:()=>n.push("/runs/new"),children:"Launch"}),"one now."]})})})]}),(0,s.jsx)(a.$n,{variant:"default",className:"absolute top-4 right-12 size-12 rounded-full",onClick:()=>n.push("/runs/new"),children:(0,s.jsx)(i.A,{className:"size-6"})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[893,221,527,777,335,550,358],()=>r(2978)),_N_E=e.O()}]);