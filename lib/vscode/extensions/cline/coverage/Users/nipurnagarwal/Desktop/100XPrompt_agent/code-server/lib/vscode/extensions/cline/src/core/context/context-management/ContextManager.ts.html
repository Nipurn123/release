
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for Users/nipurnagarwal/Desktop/100XPrompt_agent/code-server/lib/vscode/extensions/cline/src/core/context/context-management/ContextManager.ts</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../../../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../../../../../../../../index.html">All files</a> / <a href="index.html">Users/nipurnagarwal/Desktop/100XPrompt_agent/code-server/lib/vscode/extensions/cline/src/core/context/context-management</a> ContextManager.ts</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">20.09% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>171/851</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/24</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">20.09% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>171/851</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a>
<a name='L99'></a><a href='#L99'>99</a>
<a name='L100'></a><a href='#L100'>100</a>
<a name='L101'></a><a href='#L101'>101</a>
<a name='L102'></a><a href='#L102'>102</a>
<a name='L103'></a><a href='#L103'>103</a>
<a name='L104'></a><a href='#L104'>104</a>
<a name='L105'></a><a href='#L105'>105</a>
<a name='L106'></a><a href='#L106'>106</a>
<a name='L107'></a><a href='#L107'>107</a>
<a name='L108'></a><a href='#L108'>108</a>
<a name='L109'></a><a href='#L109'>109</a>
<a name='L110'></a><a href='#L110'>110</a>
<a name='L111'></a><a href='#L111'>111</a>
<a name='L112'></a><a href='#L112'>112</a>
<a name='L113'></a><a href='#L113'>113</a>
<a name='L114'></a><a href='#L114'>114</a>
<a name='L115'></a><a href='#L115'>115</a>
<a name='L116'></a><a href='#L116'>116</a>
<a name='L117'></a><a href='#L117'>117</a>
<a name='L118'></a><a href='#L118'>118</a>
<a name='L119'></a><a href='#L119'>119</a>
<a name='L120'></a><a href='#L120'>120</a>
<a name='L121'></a><a href='#L121'>121</a>
<a name='L122'></a><a href='#L122'>122</a>
<a name='L123'></a><a href='#L123'>123</a>
<a name='L124'></a><a href='#L124'>124</a>
<a name='L125'></a><a href='#L125'>125</a>
<a name='L126'></a><a href='#L126'>126</a>
<a name='L127'></a><a href='#L127'>127</a>
<a name='L128'></a><a href='#L128'>128</a>
<a name='L129'></a><a href='#L129'>129</a>
<a name='L130'></a><a href='#L130'>130</a>
<a name='L131'></a><a href='#L131'>131</a>
<a name='L132'></a><a href='#L132'>132</a>
<a name='L133'></a><a href='#L133'>133</a>
<a name='L134'></a><a href='#L134'>134</a>
<a name='L135'></a><a href='#L135'>135</a>
<a name='L136'></a><a href='#L136'>136</a>
<a name='L137'></a><a href='#L137'>137</a>
<a name='L138'></a><a href='#L138'>138</a>
<a name='L139'></a><a href='#L139'>139</a>
<a name='L140'></a><a href='#L140'>140</a>
<a name='L141'></a><a href='#L141'>141</a>
<a name='L142'></a><a href='#L142'>142</a>
<a name='L143'></a><a href='#L143'>143</a>
<a name='L144'></a><a href='#L144'>144</a>
<a name='L145'></a><a href='#L145'>145</a>
<a name='L146'></a><a href='#L146'>146</a>
<a name='L147'></a><a href='#L147'>147</a>
<a name='L148'></a><a href='#L148'>148</a>
<a name='L149'></a><a href='#L149'>149</a>
<a name='L150'></a><a href='#L150'>150</a>
<a name='L151'></a><a href='#L151'>151</a>
<a name='L152'></a><a href='#L152'>152</a>
<a name='L153'></a><a href='#L153'>153</a>
<a name='L154'></a><a href='#L154'>154</a>
<a name='L155'></a><a href='#L155'>155</a>
<a name='L156'></a><a href='#L156'>156</a>
<a name='L157'></a><a href='#L157'>157</a>
<a name='L158'></a><a href='#L158'>158</a>
<a name='L159'></a><a href='#L159'>159</a>
<a name='L160'></a><a href='#L160'>160</a>
<a name='L161'></a><a href='#L161'>161</a>
<a name='L162'></a><a href='#L162'>162</a>
<a name='L163'></a><a href='#L163'>163</a>
<a name='L164'></a><a href='#L164'>164</a>
<a name='L165'></a><a href='#L165'>165</a>
<a name='L166'></a><a href='#L166'>166</a>
<a name='L167'></a><a href='#L167'>167</a>
<a name='L168'></a><a href='#L168'>168</a>
<a name='L169'></a><a href='#L169'>169</a>
<a name='L170'></a><a href='#L170'>170</a>
<a name='L171'></a><a href='#L171'>171</a>
<a name='L172'></a><a href='#L172'>172</a>
<a name='L173'></a><a href='#L173'>173</a>
<a name='L174'></a><a href='#L174'>174</a>
<a name='L175'></a><a href='#L175'>175</a>
<a name='L176'></a><a href='#L176'>176</a>
<a name='L177'></a><a href='#L177'>177</a>
<a name='L178'></a><a href='#L178'>178</a>
<a name='L179'></a><a href='#L179'>179</a>
<a name='L180'></a><a href='#L180'>180</a>
<a name='L181'></a><a href='#L181'>181</a>
<a name='L182'></a><a href='#L182'>182</a>
<a name='L183'></a><a href='#L183'>183</a>
<a name='L184'></a><a href='#L184'>184</a>
<a name='L185'></a><a href='#L185'>185</a>
<a name='L186'></a><a href='#L186'>186</a>
<a name='L187'></a><a href='#L187'>187</a>
<a name='L188'></a><a href='#L188'>188</a>
<a name='L189'></a><a href='#L189'>189</a>
<a name='L190'></a><a href='#L190'>190</a>
<a name='L191'></a><a href='#L191'>191</a>
<a name='L192'></a><a href='#L192'>192</a>
<a name='L193'></a><a href='#L193'>193</a>
<a name='L194'></a><a href='#L194'>194</a>
<a name='L195'></a><a href='#L195'>195</a>
<a name='L196'></a><a href='#L196'>196</a>
<a name='L197'></a><a href='#L197'>197</a>
<a name='L198'></a><a href='#L198'>198</a>
<a name='L199'></a><a href='#L199'>199</a>
<a name='L200'></a><a href='#L200'>200</a>
<a name='L201'></a><a href='#L201'>201</a>
<a name='L202'></a><a href='#L202'>202</a>
<a name='L203'></a><a href='#L203'>203</a>
<a name='L204'></a><a href='#L204'>204</a>
<a name='L205'></a><a href='#L205'>205</a>
<a name='L206'></a><a href='#L206'>206</a>
<a name='L207'></a><a href='#L207'>207</a>
<a name='L208'></a><a href='#L208'>208</a>
<a name='L209'></a><a href='#L209'>209</a>
<a name='L210'></a><a href='#L210'>210</a>
<a name='L211'></a><a href='#L211'>211</a>
<a name='L212'></a><a href='#L212'>212</a>
<a name='L213'></a><a href='#L213'>213</a>
<a name='L214'></a><a href='#L214'>214</a>
<a name='L215'></a><a href='#L215'>215</a>
<a name='L216'></a><a href='#L216'>216</a>
<a name='L217'></a><a href='#L217'>217</a>
<a name='L218'></a><a href='#L218'>218</a>
<a name='L219'></a><a href='#L219'>219</a>
<a name='L220'></a><a href='#L220'>220</a>
<a name='L221'></a><a href='#L221'>221</a>
<a name='L222'></a><a href='#L222'>222</a>
<a name='L223'></a><a href='#L223'>223</a>
<a name='L224'></a><a href='#L224'>224</a>
<a name='L225'></a><a href='#L225'>225</a>
<a name='L226'></a><a href='#L226'>226</a>
<a name='L227'></a><a href='#L227'>227</a>
<a name='L228'></a><a href='#L228'>228</a>
<a name='L229'></a><a href='#L229'>229</a>
<a name='L230'></a><a href='#L230'>230</a>
<a name='L231'></a><a href='#L231'>231</a>
<a name='L232'></a><a href='#L232'>232</a>
<a name='L233'></a><a href='#L233'>233</a>
<a name='L234'></a><a href='#L234'>234</a>
<a name='L235'></a><a href='#L235'>235</a>
<a name='L236'></a><a href='#L236'>236</a>
<a name='L237'></a><a href='#L237'>237</a>
<a name='L238'></a><a href='#L238'>238</a>
<a name='L239'></a><a href='#L239'>239</a>
<a name='L240'></a><a href='#L240'>240</a>
<a name='L241'></a><a href='#L241'>241</a>
<a name='L242'></a><a href='#L242'>242</a>
<a name='L243'></a><a href='#L243'>243</a>
<a name='L244'></a><a href='#L244'>244</a>
<a name='L245'></a><a href='#L245'>245</a>
<a name='L246'></a><a href='#L246'>246</a>
<a name='L247'></a><a href='#L247'>247</a>
<a name='L248'></a><a href='#L248'>248</a>
<a name='L249'></a><a href='#L249'>249</a>
<a name='L250'></a><a href='#L250'>250</a>
<a name='L251'></a><a href='#L251'>251</a>
<a name='L252'></a><a href='#L252'>252</a>
<a name='L253'></a><a href='#L253'>253</a>
<a name='L254'></a><a href='#L254'>254</a>
<a name='L255'></a><a href='#L255'>255</a>
<a name='L256'></a><a href='#L256'>256</a>
<a name='L257'></a><a href='#L257'>257</a>
<a name='L258'></a><a href='#L258'>258</a>
<a name='L259'></a><a href='#L259'>259</a>
<a name='L260'></a><a href='#L260'>260</a>
<a name='L261'></a><a href='#L261'>261</a>
<a name='L262'></a><a href='#L262'>262</a>
<a name='L263'></a><a href='#L263'>263</a>
<a name='L264'></a><a href='#L264'>264</a>
<a name='L265'></a><a href='#L265'>265</a>
<a name='L266'></a><a href='#L266'>266</a>
<a name='L267'></a><a href='#L267'>267</a>
<a name='L268'></a><a href='#L268'>268</a>
<a name='L269'></a><a href='#L269'>269</a>
<a name='L270'></a><a href='#L270'>270</a>
<a name='L271'></a><a href='#L271'>271</a>
<a name='L272'></a><a href='#L272'>272</a>
<a name='L273'></a><a href='#L273'>273</a>
<a name='L274'></a><a href='#L274'>274</a>
<a name='L275'></a><a href='#L275'>275</a>
<a name='L276'></a><a href='#L276'>276</a>
<a name='L277'></a><a href='#L277'>277</a>
<a name='L278'></a><a href='#L278'>278</a>
<a name='L279'></a><a href='#L279'>279</a>
<a name='L280'></a><a href='#L280'>280</a>
<a name='L281'></a><a href='#L281'>281</a>
<a name='L282'></a><a href='#L282'>282</a>
<a name='L283'></a><a href='#L283'>283</a>
<a name='L284'></a><a href='#L284'>284</a>
<a name='L285'></a><a href='#L285'>285</a>
<a name='L286'></a><a href='#L286'>286</a>
<a name='L287'></a><a href='#L287'>287</a>
<a name='L288'></a><a href='#L288'>288</a>
<a name='L289'></a><a href='#L289'>289</a>
<a name='L290'></a><a href='#L290'>290</a>
<a name='L291'></a><a href='#L291'>291</a>
<a name='L292'></a><a href='#L292'>292</a>
<a name='L293'></a><a href='#L293'>293</a>
<a name='L294'></a><a href='#L294'>294</a>
<a name='L295'></a><a href='#L295'>295</a>
<a name='L296'></a><a href='#L296'>296</a>
<a name='L297'></a><a href='#L297'>297</a>
<a name='L298'></a><a href='#L298'>298</a>
<a name='L299'></a><a href='#L299'>299</a>
<a name='L300'></a><a href='#L300'>300</a>
<a name='L301'></a><a href='#L301'>301</a>
<a name='L302'></a><a href='#L302'>302</a>
<a name='L303'></a><a href='#L303'>303</a>
<a name='L304'></a><a href='#L304'>304</a>
<a name='L305'></a><a href='#L305'>305</a>
<a name='L306'></a><a href='#L306'>306</a>
<a name='L307'></a><a href='#L307'>307</a>
<a name='L308'></a><a href='#L308'>308</a>
<a name='L309'></a><a href='#L309'>309</a>
<a name='L310'></a><a href='#L310'>310</a>
<a name='L311'></a><a href='#L311'>311</a>
<a name='L312'></a><a href='#L312'>312</a>
<a name='L313'></a><a href='#L313'>313</a>
<a name='L314'></a><a href='#L314'>314</a>
<a name='L315'></a><a href='#L315'>315</a>
<a name='L316'></a><a href='#L316'>316</a>
<a name='L317'></a><a href='#L317'>317</a>
<a name='L318'></a><a href='#L318'>318</a>
<a name='L319'></a><a href='#L319'>319</a>
<a name='L320'></a><a href='#L320'>320</a>
<a name='L321'></a><a href='#L321'>321</a>
<a name='L322'></a><a href='#L322'>322</a>
<a name='L323'></a><a href='#L323'>323</a>
<a name='L324'></a><a href='#L324'>324</a>
<a name='L325'></a><a href='#L325'>325</a>
<a name='L326'></a><a href='#L326'>326</a>
<a name='L327'></a><a href='#L327'>327</a>
<a name='L328'></a><a href='#L328'>328</a>
<a name='L329'></a><a href='#L329'>329</a>
<a name='L330'></a><a href='#L330'>330</a>
<a name='L331'></a><a href='#L331'>331</a>
<a name='L332'></a><a href='#L332'>332</a>
<a name='L333'></a><a href='#L333'>333</a>
<a name='L334'></a><a href='#L334'>334</a>
<a name='L335'></a><a href='#L335'>335</a>
<a name='L336'></a><a href='#L336'>336</a>
<a name='L337'></a><a href='#L337'>337</a>
<a name='L338'></a><a href='#L338'>338</a>
<a name='L339'></a><a href='#L339'>339</a>
<a name='L340'></a><a href='#L340'>340</a>
<a name='L341'></a><a href='#L341'>341</a>
<a name='L342'></a><a href='#L342'>342</a>
<a name='L343'></a><a href='#L343'>343</a>
<a name='L344'></a><a href='#L344'>344</a>
<a name='L345'></a><a href='#L345'>345</a>
<a name='L346'></a><a href='#L346'>346</a>
<a name='L347'></a><a href='#L347'>347</a>
<a name='L348'></a><a href='#L348'>348</a>
<a name='L349'></a><a href='#L349'>349</a>
<a name='L350'></a><a href='#L350'>350</a>
<a name='L351'></a><a href='#L351'>351</a>
<a name='L352'></a><a href='#L352'>352</a>
<a name='L353'></a><a href='#L353'>353</a>
<a name='L354'></a><a href='#L354'>354</a>
<a name='L355'></a><a href='#L355'>355</a>
<a name='L356'></a><a href='#L356'>356</a>
<a name='L357'></a><a href='#L357'>357</a>
<a name='L358'></a><a href='#L358'>358</a>
<a name='L359'></a><a href='#L359'>359</a>
<a name='L360'></a><a href='#L360'>360</a>
<a name='L361'></a><a href='#L361'>361</a>
<a name='L362'></a><a href='#L362'>362</a>
<a name='L363'></a><a href='#L363'>363</a>
<a name='L364'></a><a href='#L364'>364</a>
<a name='L365'></a><a href='#L365'>365</a>
<a name='L366'></a><a href='#L366'>366</a>
<a name='L367'></a><a href='#L367'>367</a>
<a name='L368'></a><a href='#L368'>368</a>
<a name='L369'></a><a href='#L369'>369</a>
<a name='L370'></a><a href='#L370'>370</a>
<a name='L371'></a><a href='#L371'>371</a>
<a name='L372'></a><a href='#L372'>372</a>
<a name='L373'></a><a href='#L373'>373</a>
<a name='L374'></a><a href='#L374'>374</a>
<a name='L375'></a><a href='#L375'>375</a>
<a name='L376'></a><a href='#L376'>376</a>
<a name='L377'></a><a href='#L377'>377</a>
<a name='L378'></a><a href='#L378'>378</a>
<a name='L379'></a><a href='#L379'>379</a>
<a name='L380'></a><a href='#L380'>380</a>
<a name='L381'></a><a href='#L381'>381</a>
<a name='L382'></a><a href='#L382'>382</a>
<a name='L383'></a><a href='#L383'>383</a>
<a name='L384'></a><a href='#L384'>384</a>
<a name='L385'></a><a href='#L385'>385</a>
<a name='L386'></a><a href='#L386'>386</a>
<a name='L387'></a><a href='#L387'>387</a>
<a name='L388'></a><a href='#L388'>388</a>
<a name='L389'></a><a href='#L389'>389</a>
<a name='L390'></a><a href='#L390'>390</a>
<a name='L391'></a><a href='#L391'>391</a>
<a name='L392'></a><a href='#L392'>392</a>
<a name='L393'></a><a href='#L393'>393</a>
<a name='L394'></a><a href='#L394'>394</a>
<a name='L395'></a><a href='#L395'>395</a>
<a name='L396'></a><a href='#L396'>396</a>
<a name='L397'></a><a href='#L397'>397</a>
<a name='L398'></a><a href='#L398'>398</a>
<a name='L399'></a><a href='#L399'>399</a>
<a name='L400'></a><a href='#L400'>400</a>
<a name='L401'></a><a href='#L401'>401</a>
<a name='L402'></a><a href='#L402'>402</a>
<a name='L403'></a><a href='#L403'>403</a>
<a name='L404'></a><a href='#L404'>404</a>
<a name='L405'></a><a href='#L405'>405</a>
<a name='L406'></a><a href='#L406'>406</a>
<a name='L407'></a><a href='#L407'>407</a>
<a name='L408'></a><a href='#L408'>408</a>
<a name='L409'></a><a href='#L409'>409</a>
<a name='L410'></a><a href='#L410'>410</a>
<a name='L411'></a><a href='#L411'>411</a>
<a name='L412'></a><a href='#L412'>412</a>
<a name='L413'></a><a href='#L413'>413</a>
<a name='L414'></a><a href='#L414'>414</a>
<a name='L415'></a><a href='#L415'>415</a>
<a name='L416'></a><a href='#L416'>416</a>
<a name='L417'></a><a href='#L417'>417</a>
<a name='L418'></a><a href='#L418'>418</a>
<a name='L419'></a><a href='#L419'>419</a>
<a name='L420'></a><a href='#L420'>420</a>
<a name='L421'></a><a href='#L421'>421</a>
<a name='L422'></a><a href='#L422'>422</a>
<a name='L423'></a><a href='#L423'>423</a>
<a name='L424'></a><a href='#L424'>424</a>
<a name='L425'></a><a href='#L425'>425</a>
<a name='L426'></a><a href='#L426'>426</a>
<a name='L427'></a><a href='#L427'>427</a>
<a name='L428'></a><a href='#L428'>428</a>
<a name='L429'></a><a href='#L429'>429</a>
<a name='L430'></a><a href='#L430'>430</a>
<a name='L431'></a><a href='#L431'>431</a>
<a name='L432'></a><a href='#L432'>432</a>
<a name='L433'></a><a href='#L433'>433</a>
<a name='L434'></a><a href='#L434'>434</a>
<a name='L435'></a><a href='#L435'>435</a>
<a name='L436'></a><a href='#L436'>436</a>
<a name='L437'></a><a href='#L437'>437</a>
<a name='L438'></a><a href='#L438'>438</a>
<a name='L439'></a><a href='#L439'>439</a>
<a name='L440'></a><a href='#L440'>440</a>
<a name='L441'></a><a href='#L441'>441</a>
<a name='L442'></a><a href='#L442'>442</a>
<a name='L443'></a><a href='#L443'>443</a>
<a name='L444'></a><a href='#L444'>444</a>
<a name='L445'></a><a href='#L445'>445</a>
<a name='L446'></a><a href='#L446'>446</a>
<a name='L447'></a><a href='#L447'>447</a>
<a name='L448'></a><a href='#L448'>448</a>
<a name='L449'></a><a href='#L449'>449</a>
<a name='L450'></a><a href='#L450'>450</a>
<a name='L451'></a><a href='#L451'>451</a>
<a name='L452'></a><a href='#L452'>452</a>
<a name='L453'></a><a href='#L453'>453</a>
<a name='L454'></a><a href='#L454'>454</a>
<a name='L455'></a><a href='#L455'>455</a>
<a name='L456'></a><a href='#L456'>456</a>
<a name='L457'></a><a href='#L457'>457</a>
<a name='L458'></a><a href='#L458'>458</a>
<a name='L459'></a><a href='#L459'>459</a>
<a name='L460'></a><a href='#L460'>460</a>
<a name='L461'></a><a href='#L461'>461</a>
<a name='L462'></a><a href='#L462'>462</a>
<a name='L463'></a><a href='#L463'>463</a>
<a name='L464'></a><a href='#L464'>464</a>
<a name='L465'></a><a href='#L465'>465</a>
<a name='L466'></a><a href='#L466'>466</a>
<a name='L467'></a><a href='#L467'>467</a>
<a name='L468'></a><a href='#L468'>468</a>
<a name='L469'></a><a href='#L469'>469</a>
<a name='L470'></a><a href='#L470'>470</a>
<a name='L471'></a><a href='#L471'>471</a>
<a name='L472'></a><a href='#L472'>472</a>
<a name='L473'></a><a href='#L473'>473</a>
<a name='L474'></a><a href='#L474'>474</a>
<a name='L475'></a><a href='#L475'>475</a>
<a name='L476'></a><a href='#L476'>476</a>
<a name='L477'></a><a href='#L477'>477</a>
<a name='L478'></a><a href='#L478'>478</a>
<a name='L479'></a><a href='#L479'>479</a>
<a name='L480'></a><a href='#L480'>480</a>
<a name='L481'></a><a href='#L481'>481</a>
<a name='L482'></a><a href='#L482'>482</a>
<a name='L483'></a><a href='#L483'>483</a>
<a name='L484'></a><a href='#L484'>484</a>
<a name='L485'></a><a href='#L485'>485</a>
<a name='L486'></a><a href='#L486'>486</a>
<a name='L487'></a><a href='#L487'>487</a>
<a name='L488'></a><a href='#L488'>488</a>
<a name='L489'></a><a href='#L489'>489</a>
<a name='L490'></a><a href='#L490'>490</a>
<a name='L491'></a><a href='#L491'>491</a>
<a name='L492'></a><a href='#L492'>492</a>
<a name='L493'></a><a href='#L493'>493</a>
<a name='L494'></a><a href='#L494'>494</a>
<a name='L495'></a><a href='#L495'>495</a>
<a name='L496'></a><a href='#L496'>496</a>
<a name='L497'></a><a href='#L497'>497</a>
<a name='L498'></a><a href='#L498'>498</a>
<a name='L499'></a><a href='#L499'>499</a>
<a name='L500'></a><a href='#L500'>500</a>
<a name='L501'></a><a href='#L501'>501</a>
<a name='L502'></a><a href='#L502'>502</a>
<a name='L503'></a><a href='#L503'>503</a>
<a name='L504'></a><a href='#L504'>504</a>
<a name='L505'></a><a href='#L505'>505</a>
<a name='L506'></a><a href='#L506'>506</a>
<a name='L507'></a><a href='#L507'>507</a>
<a name='L508'></a><a href='#L508'>508</a>
<a name='L509'></a><a href='#L509'>509</a>
<a name='L510'></a><a href='#L510'>510</a>
<a name='L511'></a><a href='#L511'>511</a>
<a name='L512'></a><a href='#L512'>512</a>
<a name='L513'></a><a href='#L513'>513</a>
<a name='L514'></a><a href='#L514'>514</a>
<a name='L515'></a><a href='#L515'>515</a>
<a name='L516'></a><a href='#L516'>516</a>
<a name='L517'></a><a href='#L517'>517</a>
<a name='L518'></a><a href='#L518'>518</a>
<a name='L519'></a><a href='#L519'>519</a>
<a name='L520'></a><a href='#L520'>520</a>
<a name='L521'></a><a href='#L521'>521</a>
<a name='L522'></a><a href='#L522'>522</a>
<a name='L523'></a><a href='#L523'>523</a>
<a name='L524'></a><a href='#L524'>524</a>
<a name='L525'></a><a href='#L525'>525</a>
<a name='L526'></a><a href='#L526'>526</a>
<a name='L527'></a><a href='#L527'>527</a>
<a name='L528'></a><a href='#L528'>528</a>
<a name='L529'></a><a href='#L529'>529</a>
<a name='L530'></a><a href='#L530'>530</a>
<a name='L531'></a><a href='#L531'>531</a>
<a name='L532'></a><a href='#L532'>532</a>
<a name='L533'></a><a href='#L533'>533</a>
<a name='L534'></a><a href='#L534'>534</a>
<a name='L535'></a><a href='#L535'>535</a>
<a name='L536'></a><a href='#L536'>536</a>
<a name='L537'></a><a href='#L537'>537</a>
<a name='L538'></a><a href='#L538'>538</a>
<a name='L539'></a><a href='#L539'>539</a>
<a name='L540'></a><a href='#L540'>540</a>
<a name='L541'></a><a href='#L541'>541</a>
<a name='L542'></a><a href='#L542'>542</a>
<a name='L543'></a><a href='#L543'>543</a>
<a name='L544'></a><a href='#L544'>544</a>
<a name='L545'></a><a href='#L545'>545</a>
<a name='L546'></a><a href='#L546'>546</a>
<a name='L547'></a><a href='#L547'>547</a>
<a name='L548'></a><a href='#L548'>548</a>
<a name='L549'></a><a href='#L549'>549</a>
<a name='L550'></a><a href='#L550'>550</a>
<a name='L551'></a><a href='#L551'>551</a>
<a name='L552'></a><a href='#L552'>552</a>
<a name='L553'></a><a href='#L553'>553</a>
<a name='L554'></a><a href='#L554'>554</a>
<a name='L555'></a><a href='#L555'>555</a>
<a name='L556'></a><a href='#L556'>556</a>
<a name='L557'></a><a href='#L557'>557</a>
<a name='L558'></a><a href='#L558'>558</a>
<a name='L559'></a><a href='#L559'>559</a>
<a name='L560'></a><a href='#L560'>560</a>
<a name='L561'></a><a href='#L561'>561</a>
<a name='L562'></a><a href='#L562'>562</a>
<a name='L563'></a><a href='#L563'>563</a>
<a name='L564'></a><a href='#L564'>564</a>
<a name='L565'></a><a href='#L565'>565</a>
<a name='L566'></a><a href='#L566'>566</a>
<a name='L567'></a><a href='#L567'>567</a>
<a name='L568'></a><a href='#L568'>568</a>
<a name='L569'></a><a href='#L569'>569</a>
<a name='L570'></a><a href='#L570'>570</a>
<a name='L571'></a><a href='#L571'>571</a>
<a name='L572'></a><a href='#L572'>572</a>
<a name='L573'></a><a href='#L573'>573</a>
<a name='L574'></a><a href='#L574'>574</a>
<a name='L575'></a><a href='#L575'>575</a>
<a name='L576'></a><a href='#L576'>576</a>
<a name='L577'></a><a href='#L577'>577</a>
<a name='L578'></a><a href='#L578'>578</a>
<a name='L579'></a><a href='#L579'>579</a>
<a name='L580'></a><a href='#L580'>580</a>
<a name='L581'></a><a href='#L581'>581</a>
<a name='L582'></a><a href='#L582'>582</a>
<a name='L583'></a><a href='#L583'>583</a>
<a name='L584'></a><a href='#L584'>584</a>
<a name='L585'></a><a href='#L585'>585</a>
<a name='L586'></a><a href='#L586'>586</a>
<a name='L587'></a><a href='#L587'>587</a>
<a name='L588'></a><a href='#L588'>588</a>
<a name='L589'></a><a href='#L589'>589</a>
<a name='L590'></a><a href='#L590'>590</a>
<a name='L591'></a><a href='#L591'>591</a>
<a name='L592'></a><a href='#L592'>592</a>
<a name='L593'></a><a href='#L593'>593</a>
<a name='L594'></a><a href='#L594'>594</a>
<a name='L595'></a><a href='#L595'>595</a>
<a name='L596'></a><a href='#L596'>596</a>
<a name='L597'></a><a href='#L597'>597</a>
<a name='L598'></a><a href='#L598'>598</a>
<a name='L599'></a><a href='#L599'>599</a>
<a name='L600'></a><a href='#L600'>600</a>
<a name='L601'></a><a href='#L601'>601</a>
<a name='L602'></a><a href='#L602'>602</a>
<a name='L603'></a><a href='#L603'>603</a>
<a name='L604'></a><a href='#L604'>604</a>
<a name='L605'></a><a href='#L605'>605</a>
<a name='L606'></a><a href='#L606'>606</a>
<a name='L607'></a><a href='#L607'>607</a>
<a name='L608'></a><a href='#L608'>608</a>
<a name='L609'></a><a href='#L609'>609</a>
<a name='L610'></a><a href='#L610'>610</a>
<a name='L611'></a><a href='#L611'>611</a>
<a name='L612'></a><a href='#L612'>612</a>
<a name='L613'></a><a href='#L613'>613</a>
<a name='L614'></a><a href='#L614'>614</a>
<a name='L615'></a><a href='#L615'>615</a>
<a name='L616'></a><a href='#L616'>616</a>
<a name='L617'></a><a href='#L617'>617</a>
<a name='L618'></a><a href='#L618'>618</a>
<a name='L619'></a><a href='#L619'>619</a>
<a name='L620'></a><a href='#L620'>620</a>
<a name='L621'></a><a href='#L621'>621</a>
<a name='L622'></a><a href='#L622'>622</a>
<a name='L623'></a><a href='#L623'>623</a>
<a name='L624'></a><a href='#L624'>624</a>
<a name='L625'></a><a href='#L625'>625</a>
<a name='L626'></a><a href='#L626'>626</a>
<a name='L627'></a><a href='#L627'>627</a>
<a name='L628'></a><a href='#L628'>628</a>
<a name='L629'></a><a href='#L629'>629</a>
<a name='L630'></a><a href='#L630'>630</a>
<a name='L631'></a><a href='#L631'>631</a>
<a name='L632'></a><a href='#L632'>632</a>
<a name='L633'></a><a href='#L633'>633</a>
<a name='L634'></a><a href='#L634'>634</a>
<a name='L635'></a><a href='#L635'>635</a>
<a name='L636'></a><a href='#L636'>636</a>
<a name='L637'></a><a href='#L637'>637</a>
<a name='L638'></a><a href='#L638'>638</a>
<a name='L639'></a><a href='#L639'>639</a>
<a name='L640'></a><a href='#L640'>640</a>
<a name='L641'></a><a href='#L641'>641</a>
<a name='L642'></a><a href='#L642'>642</a>
<a name='L643'></a><a href='#L643'>643</a>
<a name='L644'></a><a href='#L644'>644</a>
<a name='L645'></a><a href='#L645'>645</a>
<a name='L646'></a><a href='#L646'>646</a>
<a name='L647'></a><a href='#L647'>647</a>
<a name='L648'></a><a href='#L648'>648</a>
<a name='L649'></a><a href='#L649'>649</a>
<a name='L650'></a><a href='#L650'>650</a>
<a name='L651'></a><a href='#L651'>651</a>
<a name='L652'></a><a href='#L652'>652</a>
<a name='L653'></a><a href='#L653'>653</a>
<a name='L654'></a><a href='#L654'>654</a>
<a name='L655'></a><a href='#L655'>655</a>
<a name='L656'></a><a href='#L656'>656</a>
<a name='L657'></a><a href='#L657'>657</a>
<a name='L658'></a><a href='#L658'>658</a>
<a name='L659'></a><a href='#L659'>659</a>
<a name='L660'></a><a href='#L660'>660</a>
<a name='L661'></a><a href='#L661'>661</a>
<a name='L662'></a><a href='#L662'>662</a>
<a name='L663'></a><a href='#L663'>663</a>
<a name='L664'></a><a href='#L664'>664</a>
<a name='L665'></a><a href='#L665'>665</a>
<a name='L666'></a><a href='#L666'>666</a>
<a name='L667'></a><a href='#L667'>667</a>
<a name='L668'></a><a href='#L668'>668</a>
<a name='L669'></a><a href='#L669'>669</a>
<a name='L670'></a><a href='#L670'>670</a>
<a name='L671'></a><a href='#L671'>671</a>
<a name='L672'></a><a href='#L672'>672</a>
<a name='L673'></a><a href='#L673'>673</a>
<a name='L674'></a><a href='#L674'>674</a>
<a name='L675'></a><a href='#L675'>675</a>
<a name='L676'></a><a href='#L676'>676</a>
<a name='L677'></a><a href='#L677'>677</a>
<a name='L678'></a><a href='#L678'>678</a>
<a name='L679'></a><a href='#L679'>679</a>
<a name='L680'></a><a href='#L680'>680</a>
<a name='L681'></a><a href='#L681'>681</a>
<a name='L682'></a><a href='#L682'>682</a>
<a name='L683'></a><a href='#L683'>683</a>
<a name='L684'></a><a href='#L684'>684</a>
<a name='L685'></a><a href='#L685'>685</a>
<a name='L686'></a><a href='#L686'>686</a>
<a name='L687'></a><a href='#L687'>687</a>
<a name='L688'></a><a href='#L688'>688</a>
<a name='L689'></a><a href='#L689'>689</a>
<a name='L690'></a><a href='#L690'>690</a>
<a name='L691'></a><a href='#L691'>691</a>
<a name='L692'></a><a href='#L692'>692</a>
<a name='L693'></a><a href='#L693'>693</a>
<a name='L694'></a><a href='#L694'>694</a>
<a name='L695'></a><a href='#L695'>695</a>
<a name='L696'></a><a href='#L696'>696</a>
<a name='L697'></a><a href='#L697'>697</a>
<a name='L698'></a><a href='#L698'>698</a>
<a name='L699'></a><a href='#L699'>699</a>
<a name='L700'></a><a href='#L700'>700</a>
<a name='L701'></a><a href='#L701'>701</a>
<a name='L702'></a><a href='#L702'>702</a>
<a name='L703'></a><a href='#L703'>703</a>
<a name='L704'></a><a href='#L704'>704</a>
<a name='L705'></a><a href='#L705'>705</a>
<a name='L706'></a><a href='#L706'>706</a>
<a name='L707'></a><a href='#L707'>707</a>
<a name='L708'></a><a href='#L708'>708</a>
<a name='L709'></a><a href='#L709'>709</a>
<a name='L710'></a><a href='#L710'>710</a>
<a name='L711'></a><a href='#L711'>711</a>
<a name='L712'></a><a href='#L712'>712</a>
<a name='L713'></a><a href='#L713'>713</a>
<a name='L714'></a><a href='#L714'>714</a>
<a name='L715'></a><a href='#L715'>715</a>
<a name='L716'></a><a href='#L716'>716</a>
<a name='L717'></a><a href='#L717'>717</a>
<a name='L718'></a><a href='#L718'>718</a>
<a name='L719'></a><a href='#L719'>719</a>
<a name='L720'></a><a href='#L720'>720</a>
<a name='L721'></a><a href='#L721'>721</a>
<a name='L722'></a><a href='#L722'>722</a>
<a name='L723'></a><a href='#L723'>723</a>
<a name='L724'></a><a href='#L724'>724</a>
<a name='L725'></a><a href='#L725'>725</a>
<a name='L726'></a><a href='#L726'>726</a>
<a name='L727'></a><a href='#L727'>727</a>
<a name='L728'></a><a href='#L728'>728</a>
<a name='L729'></a><a href='#L729'>729</a>
<a name='L730'></a><a href='#L730'>730</a>
<a name='L731'></a><a href='#L731'>731</a>
<a name='L732'></a><a href='#L732'>732</a>
<a name='L733'></a><a href='#L733'>733</a>
<a name='L734'></a><a href='#L734'>734</a>
<a name='L735'></a><a href='#L735'>735</a>
<a name='L736'></a><a href='#L736'>736</a>
<a name='L737'></a><a href='#L737'>737</a>
<a name='L738'></a><a href='#L738'>738</a>
<a name='L739'></a><a href='#L739'>739</a>
<a name='L740'></a><a href='#L740'>740</a>
<a name='L741'></a><a href='#L741'>741</a>
<a name='L742'></a><a href='#L742'>742</a>
<a name='L743'></a><a href='#L743'>743</a>
<a name='L744'></a><a href='#L744'>744</a>
<a name='L745'></a><a href='#L745'>745</a>
<a name='L746'></a><a href='#L746'>746</a>
<a name='L747'></a><a href='#L747'>747</a>
<a name='L748'></a><a href='#L748'>748</a>
<a name='L749'></a><a href='#L749'>749</a>
<a name='L750'></a><a href='#L750'>750</a>
<a name='L751'></a><a href='#L751'>751</a>
<a name='L752'></a><a href='#L752'>752</a>
<a name='L753'></a><a href='#L753'>753</a>
<a name='L754'></a><a href='#L754'>754</a>
<a name='L755'></a><a href='#L755'>755</a>
<a name='L756'></a><a href='#L756'>756</a>
<a name='L757'></a><a href='#L757'>757</a>
<a name='L758'></a><a href='#L758'>758</a>
<a name='L759'></a><a href='#L759'>759</a>
<a name='L760'></a><a href='#L760'>760</a>
<a name='L761'></a><a href='#L761'>761</a>
<a name='L762'></a><a href='#L762'>762</a>
<a name='L763'></a><a href='#L763'>763</a>
<a name='L764'></a><a href='#L764'>764</a>
<a name='L765'></a><a href='#L765'>765</a>
<a name='L766'></a><a href='#L766'>766</a>
<a name='L767'></a><a href='#L767'>767</a>
<a name='L768'></a><a href='#L768'>768</a>
<a name='L769'></a><a href='#L769'>769</a>
<a name='L770'></a><a href='#L770'>770</a>
<a name='L771'></a><a href='#L771'>771</a>
<a name='L772'></a><a href='#L772'>772</a>
<a name='L773'></a><a href='#L773'>773</a>
<a name='L774'></a><a href='#L774'>774</a>
<a name='L775'></a><a href='#L775'>775</a>
<a name='L776'></a><a href='#L776'>776</a>
<a name='L777'></a><a href='#L777'>777</a>
<a name='L778'></a><a href='#L778'>778</a>
<a name='L779'></a><a href='#L779'>779</a>
<a name='L780'></a><a href='#L780'>780</a>
<a name='L781'></a><a href='#L781'>781</a>
<a name='L782'></a><a href='#L782'>782</a>
<a name='L783'></a><a href='#L783'>783</a>
<a name='L784'></a><a href='#L784'>784</a>
<a name='L785'></a><a href='#L785'>785</a>
<a name='L786'></a><a href='#L786'>786</a>
<a name='L787'></a><a href='#L787'>787</a>
<a name='L788'></a><a href='#L788'>788</a>
<a name='L789'></a><a href='#L789'>789</a>
<a name='L790'></a><a href='#L790'>790</a>
<a name='L791'></a><a href='#L791'>791</a>
<a name='L792'></a><a href='#L792'>792</a>
<a name='L793'></a><a href='#L793'>793</a>
<a name='L794'></a><a href='#L794'>794</a>
<a name='L795'></a><a href='#L795'>795</a>
<a name='L796'></a><a href='#L796'>796</a>
<a name='L797'></a><a href='#L797'>797</a>
<a name='L798'></a><a href='#L798'>798</a>
<a name='L799'></a><a href='#L799'>799</a>
<a name='L800'></a><a href='#L800'>800</a>
<a name='L801'></a><a href='#L801'>801</a>
<a name='L802'></a><a href='#L802'>802</a>
<a name='L803'></a><a href='#L803'>803</a>
<a name='L804'></a><a href='#L804'>804</a>
<a name='L805'></a><a href='#L805'>805</a>
<a name='L806'></a><a href='#L806'>806</a>
<a name='L807'></a><a href='#L807'>807</a>
<a name='L808'></a><a href='#L808'>808</a>
<a name='L809'></a><a href='#L809'>809</a>
<a name='L810'></a><a href='#L810'>810</a>
<a name='L811'></a><a href='#L811'>811</a>
<a name='L812'></a><a href='#L812'>812</a>
<a name='L813'></a><a href='#L813'>813</a>
<a name='L814'></a><a href='#L814'>814</a>
<a name='L815'></a><a href='#L815'>815</a>
<a name='L816'></a><a href='#L816'>816</a>
<a name='L817'></a><a href='#L817'>817</a>
<a name='L818'></a><a href='#L818'>818</a>
<a name='L819'></a><a href='#L819'>819</a>
<a name='L820'></a><a href='#L820'>820</a>
<a name='L821'></a><a href='#L821'>821</a>
<a name='L822'></a><a href='#L822'>822</a>
<a name='L823'></a><a href='#L823'>823</a>
<a name='L824'></a><a href='#L824'>824</a>
<a name='L825'></a><a href='#L825'>825</a>
<a name='L826'></a><a href='#L826'>826</a>
<a name='L827'></a><a href='#L827'>827</a>
<a name='L828'></a><a href='#L828'>828</a>
<a name='L829'></a><a href='#L829'>829</a>
<a name='L830'></a><a href='#L830'>830</a>
<a name='L831'></a><a href='#L831'>831</a>
<a name='L832'></a><a href='#L832'>832</a>
<a name='L833'></a><a href='#L833'>833</a>
<a name='L834'></a><a href='#L834'>834</a>
<a name='L835'></a><a href='#L835'>835</a>
<a name='L836'></a><a href='#L836'>836</a>
<a name='L837'></a><a href='#L837'>837</a>
<a name='L838'></a><a href='#L838'>838</a>
<a name='L839'></a><a href='#L839'>839</a>
<a name='L840'></a><a href='#L840'>840</a>
<a name='L841'></a><a href='#L841'>841</a>
<a name='L842'></a><a href='#L842'>842</a>
<a name='L843'></a><a href='#L843'>843</a>
<a name='L844'></a><a href='#L844'>844</a>
<a name='L845'></a><a href='#L845'>845</a>
<a name='L846'></a><a href='#L846'>846</a>
<a name='L847'></a><a href='#L847'>847</a>
<a name='L848'></a><a href='#L848'>848</a>
<a name='L849'></a><a href='#L849'>849</a>
<a name='L850'></a><a href='#L850'>850</a>
<a name='L851'></a><a href='#L851'>851</a>
<a name='L852'></a><a href='#L852'>852</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { getContextWindowInfo } from "./context-window-utils"
import { formatResponse } from "@core/prompts/responses"
import { GlobalFileNames } from "@core/storage/disk"
import { fileExistsAtPath } from "@utils/fs"
import * as path from "path"
import fs from "fs/promises"
import cloneDeep from "clone-deep"
import { ClineApiReqInfo, ClineMessage } from "@shared/ExtensionMessage"
import { ApiHandler } from "@api/index"
import { Anthropic } from "@anthropic-ai/sdk"
&nbsp;
enum EditType {
	UNDEFINED = 0,
	NO_FILE_READ = 1,
	READ_FILE_TOOL = 2,
	ALTER_FILE_TOOL = 3,
	FILE_MENTION = 4,
}
&nbsp;
// array of string values allows us to cover all changes for message types currently supported
type MessageContent = string[]
type MessageMetadata = string[][]
&nbsp;
// Type for a single context update
type ContextUpdate = [number, string, MessageContent, MessageMetadata] // [timestamp, updateType, update, metadata]
&nbsp;
// Type for the serialized format of our nested maps
type SerializedContextHistory = Array&lt;
	[
		number, // messageIndex
		[
			number, // EditType (message type)
			Array&lt;
				[
					number, // blockIndex
					ContextUpdate[], // updates array (now with 4 elements including metadata)
				]
			&gt;,
		],
	]
&gt;
&nbsp;
export class ContextManager {
	// mapping from the apiMessages outer index to the inner message index to a list of actual changes, ordered by timestamp
	// timestamp is required in order to support full checkpointing, where the changes we apply need to be able to be undone when
	// moving to an earlier conversation history checkpoint - this ordering intuitively allows for binary search on truncation
	// there is also a number stored for each (EditType) which defines which message type it is, for custom handling
&nbsp;
	// format:  { outerIndex =&gt; [EditType, { innerIndex =&gt; [[timestamp, updateType, update], ...] }] }
	// example: { 1 =&gt; { [0, 0 =&gt; [[&lt;timestamp&gt;, "text", "[NOTE] Some previous conversation history with the user has been removed ..."], ...] }] }
	// the above example would be how we update the first assistant message to indicate we truncated text
	private <span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >contextHistoryUpdates: Map&lt;number, [number, Map&lt;number, ContextUpdate[]&gt;]&gt;</span></span>
&nbsp;
<span class="fstat-no" title="function not covered" >	constructor() {</span>
<span class="cstat-no" title="statement not covered" >		this.contextHistoryUpdates = new Map()</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * public function for loading contextHistoryUpdates from disk, if it exists
	 */
<span class="fstat-no" title="function not covered" >	async initializeContextHistory(taskDirectory: string) {</span>
<span class="cstat-no" title="statement not covered" >		this.contextHistoryUpdates = await this.getSavedContextHistory(taskDirectory)</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * get the stored context history updates from disk
	 */
<span class="fstat-no" title="function not covered" >	private async getSavedContextHistory(taskDirectory: string): Promise&lt;Map&lt;number, [number, Map&lt;number, ContextUpdate[]&gt;]&gt;&gt; {</span>
<span class="cstat-no" title="statement not covered" >		try {</span>
<span class="cstat-no" title="statement not covered" >			const filePath = path.join(taskDirectory, GlobalFileNames.contextHistory)</span>
<span class="cstat-no" title="statement not covered" >			if (await fileExistsAtPath(filePath)) {</span>
<span class="cstat-no" title="statement not covered" >				const data = await fs.readFile(filePath, "utf8")</span>
<span class="cstat-no" title="statement not covered" >				const serializedUpdates = JSON.parse(data) as SerializedContextHistory</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				// Update to properly reconstruct the tuple structure</span>
<span class="cstat-no" title="statement not covered" >				return new Map(</span>
<span class="cstat-no" title="statement not covered" >					serializedUpdates.map(([messageIndex, [numberValue, innerMapArray]]) =&gt; [</span>
<span class="cstat-no" title="statement not covered" >						messageIndex,</span>
<span class="cstat-no" title="statement not covered" >						[numberValue, new Map(innerMapArray)],</span>
<span class="cstat-no" title="statement not covered" >					]),</span>
<span class="cstat-no" title="statement not covered" >				)</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		} catch (error) {</span>
<span class="cstat-no" title="statement not covered" >			console.error("Failed to load context history:", error)</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >		return new Map()</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * save the context history updates to disk
	 */
<span class="fstat-no" title="function not covered" >	private async saveContextHistory(taskDirectory: string) {</span>
<span class="cstat-no" title="statement not covered" >		try {</span>
<span class="cstat-no" title="statement not covered" >			const serializedUpdates: SerializedContextHistory = Array.from(this.contextHistoryUpdates.entries()).map(</span>
<span class="cstat-no" title="statement not covered" >				([messageIndex, [numberValue, innerMap]]) =&gt; [messageIndex, [numberValue, Array.from(innerMap.entries())]],</span>
<span class="cstat-no" title="statement not covered" >			)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			await fs.writeFile(</span>
<span class="cstat-no" title="statement not covered" >				path.join(taskDirectory, GlobalFileNames.contextHistory),</span>
<span class="cstat-no" title="statement not covered" >				JSON.stringify(serializedUpdates),</span>
<span class="cstat-no" title="statement not covered" >				"utf8",</span>
<span class="cstat-no" title="statement not covered" >			)</span>
<span class="cstat-no" title="statement not covered" >		} catch (error) {</span>
<span class="cstat-no" title="statement not covered" >			console.error("Failed to save context history:", error)</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * primary entry point for getting up to date context &amp; truncating when required
	 */
<span class="fstat-no" title="function not covered" >	async getNewContextMessagesAndMetadata(</span>
<span class="cstat-no" title="statement not covered" >		apiConversationHistory: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		clineMessages: ClineMessage[],</span>
<span class="cstat-no" title="statement not covered" >		api: ApiHandler,</span>
<span class="cstat-no" title="statement not covered" >		conversationHistoryDeletedRange: [number, number] | undefined,</span>
<span class="cstat-no" title="statement not covered" >		previousApiReqIndex: number,</span>
<span class="cstat-no" title="statement not covered" >		taskDirectory: string,</span>
<span class="cstat-no" title="statement not covered" >	) {</span>
<span class="cstat-no" title="statement not covered" >		let updatedConversationHistoryDeletedRange = false</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// If the previous API request's total token usage is close to the context window, truncate the conversation history to free up space for the new request</span>
<span class="cstat-no" title="statement not covered" >		if (previousApiReqIndex &gt;= 0) {</span>
<span class="cstat-no" title="statement not covered" >			const previousRequest = clineMessages[previousApiReqIndex]</span>
<span class="cstat-no" title="statement not covered" >			if (previousRequest &amp;&amp; previousRequest.text) {</span>
<span class="cstat-no" title="statement not covered" >				const timestamp = previousRequest.ts</span>
<span class="cstat-no" title="statement not covered" >				const { tokensIn, tokensOut, cacheWrites, cacheReads }: ClineApiReqInfo = JSON.parse(previousRequest.text)</span>
<span class="cstat-no" title="statement not covered" >				const totalTokens = (tokensIn || 0) + (tokensOut || 0) + (cacheWrites || 0) + (cacheReads || 0)</span>
<span class="cstat-no" title="statement not covered" >				const { maxAllowedSize } = getContextWindowInfo(api)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				// This is the most reliable way to know when we're close to hitting the context window.</span>
<span class="cstat-no" title="statement not covered" >				if (totalTokens &gt;= maxAllowedSize) {</span>
<span class="cstat-no" title="statement not covered" >					// Since the user may switch between models with different context windows, truncating half may not be enough (ie if switching from claude 200k to deepseek 64k, half truncation will only remove 100k tokens, but we need to remove much more)</span>
<span class="cstat-no" title="statement not covered" >					// So if totalTokens/2 is greater than maxAllowedSize, we truncate 3/4 instead of 1/2</span>
<span class="cstat-no" title="statement not covered" >					const keep = totalTokens / 2 &gt; maxAllowedSize ? "quarter" : "half"</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					// we later check how many chars we trim to determine if we should still truncate history</span>
<span class="cstat-no" title="statement not covered" >					let [anyContextUpdates, uniqueFileReadIndices] = this.applyContextOptimizations(</span>
<span class="cstat-no" title="statement not covered" >						apiConversationHistory,</span>
<span class="cstat-no" title="statement not covered" >						conversationHistoryDeletedRange ? conversationHistoryDeletedRange[1] + 1 : 2,</span>
<span class="cstat-no" title="statement not covered" >						timestamp,</span>
<span class="cstat-no" title="statement not covered" >					)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					let needToTruncate = true</span>
<span class="cstat-no" title="statement not covered" >					if (anyContextUpdates) {</span>
<span class="cstat-no" title="statement not covered" >						// determine whether we've saved enough chars to not truncate</span>
<span class="cstat-no" title="statement not covered" >						const charactersSavedPercentage = this.calculateContextOptimizationMetrics(</span>
<span class="cstat-no" title="statement not covered" >							apiConversationHistory,</span>
<span class="cstat-no" title="statement not covered" >							conversationHistoryDeletedRange,</span>
<span class="cstat-no" title="statement not covered" >							uniqueFileReadIndices,</span>
<span class="cstat-no" title="statement not covered" >						)</span>
<span class="cstat-no" title="statement not covered" >						if (charactersSavedPercentage &gt;= 0.3) {</span>
<span class="cstat-no" title="statement not covered" >							needToTruncate = false</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					if (needToTruncate) {</span>
<span class="cstat-no" title="statement not covered" >						// go ahead with truncation</span>
<span class="cstat-no" title="statement not covered" >						anyContextUpdates = this.applyStandardContextTruncationNoticeChange(timestamp) || anyContextUpdates</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						// NOTE: it's okay that we overwriteConversationHistory in resume task since we're only ever removing the last user message and not anything in the middle which would affect this range</span>
<span class="cstat-no" title="statement not covered" >						conversationHistoryDeletedRange = this.getNextTruncationRange(</span>
<span class="cstat-no" title="statement not covered" >							apiConversationHistory,</span>
<span class="cstat-no" title="statement not covered" >							conversationHistoryDeletedRange,</span>
<span class="cstat-no" title="statement not covered" >							keep,</span>
<span class="cstat-no" title="statement not covered" >						)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						updatedConversationHistoryDeletedRange = true</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					// if we alter the context history, save the updated version to disk</span>
<span class="cstat-no" title="statement not covered" >					if (anyContextUpdates) {</span>
<span class="cstat-no" title="statement not covered" >						await this.saveContextHistory(taskDirectory)</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		const truncatedConversationHistory = this.getAndAlterTruncatedMessages(</span>
<span class="cstat-no" title="statement not covered" >			apiConversationHistory,</span>
<span class="cstat-no" title="statement not covered" >			conversationHistoryDeletedRange,</span>
<span class="cstat-no" title="statement not covered" >		)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return {</span>
<span class="cstat-no" title="statement not covered" >			conversationHistoryDeletedRange: conversationHistoryDeletedRange,</span>
<span class="cstat-no" title="statement not covered" >			updatedConversationHistoryDeletedRange: updatedConversationHistoryDeletedRange,</span>
<span class="cstat-no" title="statement not covered" >			truncatedConversationHistory: truncatedConversationHistory,</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * get truncation range
	 */
	public <span class="fstat-no" title="function not covered" >getNextTruncationRange(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		currentDeletedRange: [number, number] | undefined,</span>
<span class="cstat-no" title="statement not covered" >		keep: "none" | "lastTwo" | "half" | "quarter",</span>
<span class="cstat-no" title="statement not covered" >	): [number, number] {</span>
<span class="cstat-no" title="statement not covered" >		// We always keep the first user-assistant pairing, and truncate an even number of messages from there</span>
<span class="cstat-no" title="statement not covered" >		const rangeStartIndex = 2 // index 0 and 1 are kept</span>
<span class="cstat-no" title="statement not covered" >		const startOfRest = currentDeletedRange ? currentDeletedRange[1] + 1 : 2 // inclusive starting index</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		let messagesToRemove: number</span>
<span class="cstat-no" title="statement not covered" >		if (keep === "none") {</span>
<span class="cstat-no" title="statement not covered" >			// Removes all messages beyond the first core user/assistant message pair</span>
<span class="cstat-no" title="statement not covered" >			messagesToRemove = Math.max(apiMessages.length - startOfRest, 0)</span>
<span class="cstat-no" title="statement not covered" >		} else if (keep === "lastTwo") {</span>
<span class="cstat-no" title="statement not covered" >			// Keep the last user-assistant pair in addition to the first core user/assistant message pair</span>
<span class="cstat-no" title="statement not covered" >			messagesToRemove = Math.max(apiMessages.length - startOfRest - 2, 0)</span>
<span class="cstat-no" title="statement not covered" >		} else if (keep === "half") {</span>
<span class="cstat-no" title="statement not covered" >			// Remove half of remaining user-assistant pairs</span>
<span class="cstat-no" title="statement not covered" >			// We first calculate half of the messages then divide by 2 to get the number of pairs.</span>
<span class="cstat-no" title="statement not covered" >			// After flooring, we multiply by 2 to get the number of messages.</span>
<span class="cstat-no" title="statement not covered" >			// Note that this will also always be an even number.</span>
<span class="cstat-no" title="statement not covered" >			messagesToRemove = Math.floor((apiMessages.length - startOfRest) / 4) * 2 // Keep even number</span>
<span class="cstat-no" title="statement not covered" >		} else {</span>
<span class="cstat-no" title="statement not covered" >			// Remove 3/4 of remaining user-assistant pairs</span>
<span class="cstat-no" title="statement not covered" >			// We calculate 3/4ths of the messages then divide by 2 to get the number of pairs.</span>
<span class="cstat-no" title="statement not covered" >			// After flooring, we multiply by 2 to get the number of messages.</span>
<span class="cstat-no" title="statement not covered" >			// Note that this will also always be an even number.</span>
<span class="cstat-no" title="statement not covered" >			messagesToRemove = Math.floor(((apiMessages.length - startOfRest) * 3) / 4 / 2) * 2</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		let rangeEndIndex = startOfRest + messagesToRemove - 1 // inclusive ending index</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// Make sure that the last message being removed is a assistant message, so the next message after the initial user-assistant pair is an assistant message. This preserves the user-assistant-user-assistant structure.</span>
<span class="cstat-no" title="statement not covered" >		// NOTE: anthropic format messages are always user-assistant-user-assistant, while openai format messages can have multiple user messages in a row (we use anthropic format throughout cline)</span>
<span class="cstat-no" title="statement not covered" >		if (apiMessages[rangeEndIndex].role !== "assistant") {</span>
<span class="cstat-no" title="statement not covered" >			rangeEndIndex -= 1</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// this is an inclusive range that will be removed from the conversation history</span>
<span class="cstat-no" title="statement not covered" >		return [rangeStartIndex, rangeEndIndex]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * external interface to support old calls
	 */
	public <span class="fstat-no" title="function not covered" >getTruncatedMessages(</span>
<span class="cstat-no" title="statement not covered" >		messages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		deletedRange: [number, number] | undefined,</span>
<span class="cstat-no" title="statement not covered" >	): Anthropic.Messages.MessageParam[] {</span>
<span class="cstat-no" title="statement not covered" >		return this.getAndAlterTruncatedMessages(messages, deletedRange)</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * apply all required truncation methods to the messages in context
	 */
	private <span class="fstat-no" title="function not covered" >getAndAlterTruncatedMessages(</span>
<span class="cstat-no" title="statement not covered" >		messages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		deletedRange: [number, number] | undefined,</span>
<span class="cstat-no" title="statement not covered" >	): Anthropic.Messages.MessageParam[] {</span>
<span class="cstat-no" title="statement not covered" >		if (messages.length &lt;= 1) {</span>
<span class="cstat-no" title="statement not covered" >			return messages</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		const updatedMessages = this.applyContextHistoryUpdates(messages, deletedRange ? deletedRange[1] + 1 : 2)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// OLD NOTE: if you try to console log these, don't forget that logging a reference to an array may not provide the same result as logging a slice() snapshot of that array at that exact moment. The following DOES in fact include the latest assistant message.</span>
<span class="cstat-no" title="statement not covered" >		return updatedMessages</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * applies deletedRange truncation and other alterations based on changes in this.contextHistoryUpdates
	 */
	private <span class="fstat-no" title="function not covered" >applyContextHistoryUpdates(</span>
<span class="cstat-no" title="statement not covered" >		messages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		startFromIndex: number,</span>
<span class="cstat-no" title="statement not covered" >	): Anthropic.Messages.MessageParam[] {</span>
<span class="cstat-no" title="statement not covered" >		// runtime is linear in length of user messages, if expecting a limited number of alterations, could be more optimal to loop over alterations</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		const firstChunk = messages.slice(0, 2) // get first user-assistant pair</span>
<span class="cstat-no" title="statement not covered" >		const secondChunk = messages.slice(startFromIndex) // get remaining messages within context</span>
<span class="cstat-no" title="statement not covered" >		const messagesToUpdate = [...firstChunk, ...secondChunk]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// we need the mapping from the local indices in messagesToUpdate to the global array of updates in this.contextHistoryUpdates</span>
<span class="cstat-no" title="statement not covered" >		const originalIndices = [</span>
<span class="cstat-no" title="statement not covered" >			...Array(2).keys(),</span>
<span class="cstat-no" title="statement not covered" >			...Array(secondChunk.length)</span>
<span class="cstat-no" title="statement not covered" >				.fill(0)</span>
<span class="cstat-no" title="statement not covered" >				.map((_, i) =&gt; i + startFromIndex),</span>
<span class="cstat-no" title="statement not covered" >		]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		for (let arrayIndex = 0; arrayIndex &lt; messagesToUpdate.length; arrayIndex++) {</span>
<span class="cstat-no" title="statement not covered" >			const messageIndex = originalIndices[arrayIndex]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			const innerTuple = this.contextHistoryUpdates.get(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >			if (!innerTuple) {</span>
<span class="cstat-no" title="statement not covered" >				continue</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// because we are altering this, we need a deep copy</span>
<span class="cstat-no" title="statement not covered" >			messagesToUpdate[arrayIndex] = cloneDeep(messagesToUpdate[arrayIndex])</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// Extract the map from the tuple</span>
<span class="cstat-no" title="statement not covered" >			const innerMap = innerTuple[1]</span>
<span class="cstat-no" title="statement not covered" >			for (const [blockIndex, changes] of innerMap) {</span>
<span class="cstat-no" title="statement not covered" >				// apply the latest change among n changes - [timestamp, updateType, update]</span>
<span class="cstat-no" title="statement not covered" >				const latestChange = changes[changes.length - 1]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				if (latestChange[1] === "text") {</span>
<span class="cstat-no" title="statement not covered" >					// only altering text for now</span>
<span class="cstat-no" title="statement not covered" >					const message = messagesToUpdate[arrayIndex]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					if (Array.isArray(message.content)) {</span>
<span class="cstat-no" title="statement not covered" >						const block = message.content[blockIndex]</span>
<span class="cstat-no" title="statement not covered" >						if (block &amp;&amp; block.type === "text") {</span>
<span class="cstat-no" title="statement not covered" >							block.text = latestChange[2][0]</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return messagesToUpdate</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * removes all context history updates that occurred after the specified timestamp and saves to disk
	 */
<span class="fstat-no" title="function not covered" >	async truncateContextHistory(timestamp: number, taskDirectory: string): Promise&lt;void&gt; {</span>
<span class="cstat-no" title="statement not covered" >		this.truncateContextHistoryAtTimestamp(this.contextHistoryUpdates, timestamp)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// save the modified context history to disk</span>
<span class="cstat-no" title="statement not covered" >		await this.saveContextHistory(taskDirectory)</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * alters the context history to remove all alterations after a given timestamp
	 * removes the index if there are no alterations there anymore, both outer and inner indices
	 */
	private <span class="fstat-no" title="function not covered" >truncateContextHistoryAtTimestamp(</span>
<span class="cstat-no" title="statement not covered" >		contextHistory: Map&lt;number, [number, Map&lt;number, ContextUpdate[]&gt;]&gt;,</span>
<span class="cstat-no" title="statement not covered" >		timestamp: number,</span>
<span class="cstat-no" title="statement not covered" >	): void {</span>
<span class="cstat-no" title="statement not covered" >		for (const [messageIndex, [_, innerMap]] of contextHistory) {</span>
<span class="cstat-no" title="statement not covered" >			// track which blockIndices to delete</span>
<span class="cstat-no" title="statement not covered" >			const blockIndicesToDelete: number[] = []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// loop over the innerIndices of the messages in this block</span>
<span class="cstat-no" title="statement not covered" >			for (const [blockIndex, updates] of innerMap) {</span>
<span class="cstat-no" title="statement not covered" >				// updates ordered by timestamp, so find cutoff point by iterating from right to left</span>
<span class="cstat-no" title="statement not covered" >				let cutoffIndex = updates.length - 1</span>
<span class="cstat-no" title="statement not covered" >				while (cutoffIndex &gt;= 0 &amp;&amp; updates[cutoffIndex][0] &gt; timestamp) {</span>
<span class="cstat-no" title="statement not covered" >					cutoffIndex--</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				// If we found updates to remove</span>
<span class="cstat-no" title="statement not covered" >				if (cutoffIndex &lt; updates.length - 1) {</span>
<span class="cstat-no" title="statement not covered" >					// Modify the array in place to keep only updates up to cutoffIndex</span>
<span class="cstat-no" title="statement not covered" >					updates.length = cutoffIndex + 1</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					// If no updates left after truncation, mark this block for deletion</span>
<span class="cstat-no" title="statement not covered" >					if (updates.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >						blockIndicesToDelete.push(blockIndex)</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// Remove empty blocks from inner map</span>
<span class="cstat-no" title="statement not covered" >			for (const blockIndex of blockIndicesToDelete) {</span>
<span class="cstat-no" title="statement not covered" >				innerMap.delete(blockIndex)</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// If inner map is now empty, remove the message index from outer map</span>
<span class="cstat-no" title="statement not covered" >			if (innerMap.size === 0) {</span>
<span class="cstat-no" title="statement not covered" >				contextHistory.delete(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * applies the context optimization steps and returns whether any changes were made
	 */
	private <span class="fstat-no" title="function not covered" >applyContextOptimizations(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		startFromIndex: number,</span>
<span class="cstat-no" title="statement not covered" >		timestamp: number,</span>
<span class="cstat-no" title="statement not covered" >	): [boolean, Set&lt;number&gt;] {</span>
<span class="cstat-no" title="statement not covered" >		const [fileReadUpdatesBool, uniqueFileReadIndices] = this.findAndPotentiallySaveFileReadContextHistoryUpdates(</span>
<span class="cstat-no" title="statement not covered" >			apiMessages,</span>
<span class="cstat-no" title="statement not covered" >			startFromIndex,</span>
<span class="cstat-no" title="statement not covered" >			timestamp,</span>
<span class="cstat-no" title="statement not covered" >		)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// true if any context optimization steps alter state</span>
<span class="cstat-no" title="statement not covered" >		const contextHistoryUpdated = fileReadUpdatesBool</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return [contextHistoryUpdated, uniqueFileReadIndices]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * Public function for triggering potentially setting the truncation message
	 * If the truncation message already exists, does nothing, otherwise adds the message
	 */
<span class="fstat-no" title="function not covered" >	async triggerApplyStandardContextTruncationNoticeChange(timestamp: number, taskDirectory: string) {</span>
<span class="cstat-no" title="statement not covered" >		const updated = this.applyStandardContextTruncationNoticeChange(timestamp)</span>
<span class="cstat-no" title="statement not covered" >		if (updated) {</span>
<span class="cstat-no" title="statement not covered" >			await this.saveContextHistory(taskDirectory)</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * if there is any truncation and there is no other alteration already set, alter the assistant message to indicate this occurred
	 */
	private <span class="fstat-no" title="function not covered" >applyStandardContextTruncationNoticeChange(timestamp: number): boolean {</span>
<span class="cstat-no" title="statement not covered" >		if (!this.contextHistoryUpdates.has(1)) {</span>
<span class="cstat-no" title="statement not covered" >			// first assistant message always at index 1</span>
<span class="cstat-no" title="statement not covered" >			const innerMap = new Map&lt;number, ContextUpdate[]&gt;()</span>
<span class="cstat-no" title="statement not covered" >			innerMap.set(0, [[timestamp, "text", [formatResponse.contextTruncationNotice()], []]])</span>
<span class="cstat-no" title="statement not covered" >			this.contextHistoryUpdates.set(1, [0, innerMap]) // EditType is undefined for first assistant message</span>
<span class="cstat-no" title="statement not covered" >			return true</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >		return false</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * wraps the logic for determining file reads to overwrite, and altering state
	 * returns whether any updates were made (bool) and indices where updates were made
	 */
	private <span class="fstat-no" title="function not covered" >findAndPotentiallySaveFileReadContextHistoryUpdates(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		startFromIndex: number,</span>
<span class="cstat-no" title="statement not covered" >		timestamp: number,</span>
<span class="cstat-no" title="statement not covered" >	): [boolean, Set&lt;number&gt;] {</span>
<span class="cstat-no" title="statement not covered" >		const [fileReadIndices, messageFilePaths] = this.getPossibleDuplicateFileReads(apiMessages, startFromIndex)</span>
<span class="cstat-no" title="statement not covered" >		return this.applyFileReadContextHistoryUpdates(fileReadIndices, messageFilePaths, apiMessages, timestamp)</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * generate a mapping from unique file reads from multiple tool calls to their outer index position(s)
	 * also return additional metadata to support multiple file reads in file mention text blocks
	 */
	private <span class="fstat-no" title="function not covered" >getPossibleDuplicateFileReads(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		startFromIndex: number,</span>
<span class="cstat-no" title="statement not covered" >	): [Map&lt;string, [number, number, string, string][]&gt;, Map&lt;number, string[]&gt;] {</span>
<span class="cstat-no" title="statement not covered" >		// fileReadIndices: { fileName =&gt; [outerIndex, EditType, searchText, replaceText] }</span>
<span class="cstat-no" title="statement not covered" >		// messageFilePaths: { outerIndex =&gt; [fileRead1, fileRead2, ..] }</span>
<span class="cstat-no" title="statement not covered" >		// searchText in fileReadIndices is only required for file mention file-reads since there can be more than one file in the text</span>
<span class="cstat-no" title="statement not covered" >		// searchText will be the empty string "" in the case that it's not required, for non-file mentions</span>
<span class="cstat-no" title="statement not covered" >		// messageFilePaths is only used for file mentions as there can be multiple files read in the same text chunk</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// for all text blocks per file, has info for updating the block</span>
<span class="cstat-no" title="statement not covered" >		const fileReadIndices = new Map&lt;string, [number, number, string, string][]&gt;()</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// for file mention text blocks, track all the unique files read</span>
<span class="cstat-no" title="statement not covered" >		const messageFilePaths = new Map&lt;number, string[]&gt;()</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		for (let i = startFromIndex; i &lt; apiMessages.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >			let thisExistingFileReads: string[] = []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			if (this.contextHistoryUpdates.has(i)) {</span>
<span class="cstat-no" title="statement not covered" >				const innerTuple = this.contextHistoryUpdates.get(i)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				if (innerTuple) {</span>
<span class="cstat-no" title="statement not covered" >					// safety check</span>
<span class="cstat-no" title="statement not covered" >					const editType = innerTuple[0]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					if (editType === EditType.FILE_MENTION) {</span>
<span class="cstat-no" title="statement not covered" >						const innerMap = innerTuple[1]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						const blockIndex = 1 // file mention blocks assumed to be at index 1</span>
<span class="cstat-no" title="statement not covered" >						const blockUpdates = innerMap.get(blockIndex)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						// if we have updated this text previously, we want to check whether the lists of files in the metadata are the same</span>
<span class="cstat-no" title="statement not covered" >						if (blockUpdates &amp;&amp; blockUpdates.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >							// the first list indicates the files we have replaced in this text, second list indicates all unique files in this text</span>
<span class="cstat-no" title="statement not covered" >							// if they are equal then we have replaced all the files in this text already, and can ignore further processing</span>
<span class="cstat-no" title="statement not covered" >							if (</span>
<span class="cstat-no" title="statement not covered" >								blockUpdates[blockUpdates.length - 1][3][0].length ===</span>
<span class="cstat-no" title="statement not covered" >								blockUpdates[blockUpdates.length - 1][3][1].length</span>
<span class="cstat-no" title="statement not covered" >							) {</span>
<span class="cstat-no" title="statement not covered" >								continue</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >							// otherwise there are still file reads here we can overwrite, so still need to process this text chunk</span>
<span class="cstat-no" title="statement not covered" >							// to do so we need to keep track of which files we've already replaced so we don't replace them again</span>
<span class="cstat-no" title="statement not covered" >							else {</span>
<span class="cstat-no" title="statement not covered" >								thisExistingFileReads = blockUpdates[blockUpdates.length - 1][3][0]</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					} else {</span>
<span class="cstat-no" title="statement not covered" >						// for all other cases we can assume that we dont need to check this again</span>
<span class="cstat-no" title="statement not covered" >						continue</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			const message = apiMessages[i]</span>
<span class="cstat-no" title="statement not covered" >			if (message.role === "user" &amp;&amp; Array.isArray(message.content) &amp;&amp; message.content.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >				const firstBlock = message.content[0]</span>
<span class="cstat-no" title="statement not covered" >				if (firstBlock.type === "text") {</span>
<span class="cstat-no" title="statement not covered" >					const matchTup = this.parsePotentialToolCall(firstBlock.text)</span>
<span class="cstat-no" title="statement not covered" >					let foundNormalFileRead = false</span>
<span class="cstat-no" title="statement not covered" >					if (matchTup) {</span>
<span class="cstat-no" title="statement not covered" >						if (matchTup[0] === "read_file") {</span>
<span class="cstat-no" title="statement not covered" >							this.handleReadFileToolCall(i, matchTup[1], fileReadIndices)</span>
<span class="cstat-no" title="statement not covered" >							foundNormalFileRead = true</span>
<span class="cstat-no" title="statement not covered" >						} else if (matchTup[0] === "replace_in_file" || matchTup[0] === "write_to_file") {</span>
<span class="cstat-no" title="statement not covered" >							if (message.content.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >								const secondBlock = message.content[1]</span>
<span class="cstat-no" title="statement not covered" >								if (secondBlock.type === "text") {</span>
<span class="cstat-no" title="statement not covered" >									this.handlePotentialFileChangeToolCalls(i, matchTup[1], secondBlock.text, fileReadIndices)</span>
<span class="cstat-no" title="statement not covered" >									foundNormalFileRead = true</span>
<span class="cstat-no" title="statement not covered" >								}</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					// file mentions can happen in most other user message blocks</span>
<span class="cstat-no" title="statement not covered" >					if (!foundNormalFileRead) {</span>
<span class="cstat-no" title="statement not covered" >						if (message.content.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >							const secondBlock = message.content[1]</span>
<span class="cstat-no" title="statement not covered" >							if (secondBlock.type === "text") {</span>
<span class="cstat-no" title="statement not covered" >								const [hasFileRead, filePaths] = this.handlePotentialFileMentionCalls(</span>
<span class="cstat-no" title="statement not covered" >									i,</span>
<span class="cstat-no" title="statement not covered" >									secondBlock.text,</span>
<span class="cstat-no" title="statement not covered" >									fileReadIndices,</span>
<span class="cstat-no" title="statement not covered" >									thisExistingFileReads, // file reads we've already replaced in this text in the latest version of this updated text</span>
<span class="cstat-no" title="statement not covered" >								)</span>
<span class="cstat-no" title="statement not covered" >								if (hasFileRead) {</span>
<span class="cstat-no" title="statement not covered" >									messageFilePaths.set(i, filePaths) // all file paths in this string</span>
<span class="cstat-no" title="statement not covered" >								}</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return [fileReadIndices, messageFilePaths]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * handles potential file content mentions in text blocks
	 * there will not be more than one of the same file read in a text block
	 */
	private <span class="fstat-no" title="function not covered" >handlePotentialFileMentionCalls(</span>
<span class="cstat-no" title="statement not covered" >		i: number,</span>
<span class="cstat-no" title="statement not covered" >		secondBlockText: string,</span>
<span class="cstat-no" title="statement not covered" >		fileReadIndices: Map&lt;string, [number, number, string, string][]&gt;,</span>
<span class="cstat-no" title="statement not covered" >		thisExistingFileReads: string[],</span>
<span class="cstat-no" title="statement not covered" >	): [boolean, string[]] {</span>
<span class="cstat-no" title="statement not covered" >		const pattern = new RegExp(`&lt;file_content path="([^"]*)"&gt;([\\s\\S]*?)&lt;/file_content&gt;`, "g")</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		let foundMatch = false</span>
<span class="cstat-no" title="statement not covered" >		const filePaths: string[] = []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		let match</span>
<span class="cstat-no" title="statement not covered" >		while ((match = pattern.exec(secondBlockText)) !== null) {</span>
<span class="cstat-no" title="statement not covered" >			foundMatch = true</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			const filePath = match[1]</span>
<span class="cstat-no" title="statement not covered" >			filePaths.push(filePath) // we will record all unique paths from file mentions in this text</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// we can assume that thisExistingFileReads does not have many entries</span>
<span class="cstat-no" title="statement not covered" >			if (!thisExistingFileReads.includes(filePath)) {</span>
<span class="cstat-no" title="statement not covered" >				// meaning we haven't already replaced this file read</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				const entireMatch = match[0] // The entire matched string</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				// Create the replacement text - keep the tags but replace the content</span>
<span class="cstat-no" title="statement not covered" >				const replacementText = `&lt;file_content path="${filePath}"&gt;${formatResponse.duplicateFileReadNotice()}&lt;/file_content&gt;`</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >				const indices = fileReadIndices.get(filePath) || []</span>
<span class="cstat-no" title="statement not covered" >				indices.push([i, EditType.FILE_MENTION, entireMatch, replacementText])</span>
<span class="cstat-no" title="statement not covered" >				fileReadIndices.set(filePath, indices)</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return [foundMatch, filePaths]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * parses specific tool call formats, returns null if no acceptable format is found
	 */
	private <span class="fstat-no" title="function not covered" >parsePotentialToolCall(text: string): [string, string] | null {</span>
<span class="cstat-no" title="statement not covered" >		const match = text.match(/^\[([^\s]+) for '([^']+)'\] Result:$/)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		if (!match) {</span>
<span class="cstat-no" title="statement not covered" >			return null</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return [match[1], match[2]]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * file_read tool call always pastes the file, so this is always a hit
	 */
	private <span class="fstat-no" title="function not covered" >handleReadFileToolCall(</span>
<span class="cstat-no" title="statement not covered" >		i: number,</span>
<span class="cstat-no" title="statement not covered" >		filePath: string,</span>
<span class="cstat-no" title="statement not covered" >		fileReadIndices: Map&lt;string, [number, number, string, string][]&gt;,</span>
<span class="cstat-no" title="statement not covered" >	) {</span>
<span class="cstat-no" title="statement not covered" >		const indices = fileReadIndices.get(filePath) || []</span>
<span class="cstat-no" title="statement not covered" >		indices.push([i, EditType.READ_FILE_TOOL, "", formatResponse.duplicateFileReadNotice()])</span>
<span class="cstat-no" title="statement not covered" >		fileReadIndices.set(filePath, indices)</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * write_to_file and replace_in_file tool output are handled similarly
	 */
	private <span class="fstat-no" title="function not covered" >handlePotentialFileChangeToolCalls(</span>
<span class="cstat-no" title="statement not covered" >		i: number,</span>
<span class="cstat-no" title="statement not covered" >		filePath: string,</span>
<span class="cstat-no" title="statement not covered" >		secondBlockText: string,</span>
<span class="cstat-no" title="statement not covered" >		fileReadIndices: Map&lt;string, [number, number, string, string][]&gt;,</span>
<span class="cstat-no" title="statement not covered" >	) {</span>
<span class="cstat-no" title="statement not covered" >		const pattern = new RegExp(`(&lt;final_file_content path="[^"]*"&gt;)[\\s\\S]*?(&lt;/final_file_content&gt;)`)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// check if this exists in the text, it won't exist if the user rejects the file change for example</span>
<span class="cstat-no" title="statement not covered" >		if (pattern.test(secondBlockText)) {</span>
<span class="cstat-no" title="statement not covered" >			const replacementText = secondBlockText.replace(pattern, `$1 ${formatResponse.duplicateFileReadNotice()} $2`)</span>
<span class="cstat-no" title="statement not covered" >			const indices = fileReadIndices.get(filePath) || []</span>
<span class="cstat-no" title="statement not covered" >			indices.push([i, EditType.ALTER_FILE_TOOL, "", replacementText])</span>
<span class="cstat-no" title="statement not covered" >			fileReadIndices.set(filePath, indices)</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * alter all occurrences of file read operations and track which messages were updated
	 * returns the outer index of messages we alter, to count number of changes
	 */
	private <span class="fstat-no" title="function not covered" >applyFileReadContextHistoryUpdates(</span>
<span class="cstat-no" title="statement not covered" >		fileReadIndices: Map&lt;string, [number, number, string, string][]&gt;,</span>
<span class="cstat-no" title="statement not covered" >		messageFilePaths: Map&lt;number, string[]&gt;,</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		timestamp: number,</span>
<span class="cstat-no" title="statement not covered" >	): [boolean, Set&lt;number&gt;] {</span>
<span class="cstat-no" title="statement not covered" >		let didUpdate = false</span>
<span class="cstat-no" title="statement not covered" >		const updatedMessageIndices = new Set&lt;number&gt;() // track which messages we update on this round</span>
<span class="cstat-no" title="statement not covered" >		const fileMentionUpdates = new Map&lt;number, [string, string[]]&gt;()</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		for (const [filePath, indices] of fileReadIndices.entries()) {</span>
<span class="cstat-no" title="statement not covered" >			// Only process if there are multiple reads of the same file, else we will want to keep the latest read of the file</span>
<span class="cstat-no" title="statement not covered" >			if (indices.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >				// Process all but the last index, as we will keep that instance of the file read</span>
<span class="cstat-no" title="statement not covered" >				for (let i = 0; i &lt; indices.length - 1; i++) {</span>
<span class="cstat-no" title="statement not covered" >					const messageIndex = indices[i][0]</span>
<span class="cstat-no" title="statement not covered" >					const messageType = indices[i][1] // EditType value</span>
<span class="cstat-no" title="statement not covered" >					const searchText = indices[i][2] // search text (for file mentions, else empty string)</span>
<span class="cstat-no" title="statement not covered" >					const messageString = indices[i][3] // what we will replace the string with</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					didUpdate = true</span>
<span class="cstat-no" title="statement not covered" >					updatedMessageIndices.add(messageIndex)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					// for single-fileread text we can set the updates here</span>
<span class="cstat-no" title="statement not covered" >					// for potential multi-fileread text we need to determine all changes &amp; iteratively update the text prior to saving the final change</span>
<span class="cstat-no" title="statement not covered" >					if (messageType === EditType.FILE_MENTION) {</span>
<span class="cstat-no" title="statement not covered" >						if (!fileMentionUpdates.has(messageIndex)) {</span>
<span class="cstat-no" title="statement not covered" >							// Get base text either from existing updates or from apiMessages</span>
<span class="cstat-no" title="statement not covered" >							let baseText = ""</span>
<span class="cstat-no" title="statement not covered" >							let prevFilesReplaced: string[] = []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >							const innerTuple = this.contextHistoryUpdates.get(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >							if (innerTuple) {</span>
<span class="cstat-no" title="statement not covered" >								const blockUpdates = innerTuple[1].get(1) // assumed index=1 for file mention filereads</span>
<span class="cstat-no" title="statement not covered" >								if (blockUpdates &amp;&amp; blockUpdates.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >									baseText = blockUpdates[blockUpdates.length - 1][2][0] // index 0 of MessageContent</span>
<span class="cstat-no" title="statement not covered" >									prevFilesReplaced = blockUpdates[blockUpdates.length - 1][3][0] // previously overwritten file reads in this text</span>
<span class="cstat-no" title="statement not covered" >								}</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >							// can assume that this content will exist, otherwise it would not have been in fileReadIndices</span>
<span class="cstat-no" title="statement not covered" >							const messageContent = apiMessages[messageIndex]?.content</span>
<span class="cstat-no" title="statement not covered" >							if (!baseText &amp;&amp; Array.isArray(messageContent) &amp;&amp; messageContent.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >								const contentBlock = messageContent[1] // assume index=1 for all text to replace for file mention filereads</span>
<span class="cstat-no" title="statement not covered" >								if (contentBlock.type === "text") {</span>
<span class="cstat-no" title="statement not covered" >									baseText = contentBlock.text</span>
<span class="cstat-no" title="statement not covered" >								}</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >							// prevFilesReplaced keeps track of the previous file reads we've replace in this string, empty array if none</span>
<span class="cstat-no" title="statement not covered" >							fileMentionUpdates.set(messageIndex, [baseText, prevFilesReplaced])</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						// Replace searchText with messageString for all file reads we need to replace in this text</span>
<span class="cstat-no" title="statement not covered" >						if (searchText) {</span>
<span class="cstat-no" title="statement not covered" >							const currentTuple = fileMentionUpdates.get(messageIndex) || ["", []]</span>
<span class="cstat-no" title="statement not covered" >							if (currentTuple[0]) {</span>
<span class="cstat-no" title="statement not covered" >								// safety check</span>
<span class="cstat-no" title="statement not covered" >								// replace this text chunk</span>
<span class="cstat-no" title="statement not covered" >								const updatedText = currentTuple[0].replace(searchText, messageString)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >								// add the newly added filePath read</span>
<span class="cstat-no" title="statement not covered" >								const updatedFileReads = currentTuple[1]</span>
<span class="cstat-no" title="statement not covered" >								updatedFileReads.push(filePath)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >								fileMentionUpdates.set(messageIndex, [updatedText, updatedFileReads])</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					} else {</span>
<span class="cstat-no" title="statement not covered" >						let innerTuple = this.contextHistoryUpdates.get(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >						let innerMap: Map&lt;number, ContextUpdate[]&gt;</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						if (!innerTuple) {</span>
<span class="cstat-no" title="statement not covered" >							innerMap = new Map&lt;number, ContextUpdate[]&gt;()</span>
<span class="cstat-no" title="statement not covered" >							this.contextHistoryUpdates.set(messageIndex, [messageType, innerMap])</span>
<span class="cstat-no" title="statement not covered" >						} else {</span>
<span class="cstat-no" title="statement not covered" >							innerMap = innerTuple[1]</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						// block index for file reads from read_file, write_to_file, replace_in_file tools is 1</span>
<span class="cstat-no" title="statement not covered" >						const blockIndex = 1</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						const updates = innerMap.get(blockIndex) || []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						// metadata array is empty for non-file mention occurrences</span>
<span class="cstat-no" title="statement not covered" >						updates.push([timestamp, "text", [messageString], []])</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >						innerMap.set(blockIndex, updates)</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// apply file mention updates to contextHistoryUpdates</span>
<span class="cstat-no" title="statement not covered" >		// in fileMentionUpdates, filePathsUpdated includes all the file paths which are updated in the latest version of this altered text</span>
<span class="cstat-no" title="statement not covered" >		for (const [messageIndex, [updatedText, filePathsUpdated]] of fileMentionUpdates.entries()) {</span>
<span class="cstat-no" title="statement not covered" >			let innerTuple = this.contextHistoryUpdates.get(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >			let innerMap: Map&lt;number, ContextUpdate[]&gt;</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			if (!innerTuple) {</span>
<span class="cstat-no" title="statement not covered" >				innerMap = new Map&lt;number, ContextUpdate[]&gt;()</span>
<span class="cstat-no" title="statement not covered" >				this.contextHistoryUpdates.set(messageIndex, [EditType.FILE_MENTION, innerMap])</span>
<span class="cstat-no" title="statement not covered" >			} else {</span>
<span class="cstat-no" title="statement not covered" >				innerMap = innerTuple[1]</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			const blockIndex = 1 // we only consider the block index of 1 for file mentions</span>
<span class="cstat-no" title="statement not covered" >			const updates = innerMap.get(blockIndex) || []</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// filePathsUpdated includes changes done previously to this timestamp, and right now</span>
<span class="cstat-no" title="statement not covered" >			if (messageFilePaths.has(messageIndex)) {</span>
<span class="cstat-no" title="statement not covered" >				const allFileReads = messageFilePaths.get(messageIndex)</span>
<span class="cstat-no" title="statement not covered" >				if (allFileReads) {</span>
<span class="cstat-no" title="statement not covered" >					// safety check</span>
<span class="cstat-no" title="statement not covered" >					// we gather all the file reads possible in this text from messageFilePaths</span>
<span class="cstat-no" title="statement not covered" >					// filePathsUpdated from fileMentionUpdates stores all the files reads we have replaced now &amp; previously</span>
<span class="cstat-no" title="statement not covered" >					updates.push([timestamp, "text", [updatedText], [filePathsUpdated, allFileReads]])</span>
<span class="cstat-no" title="statement not covered" >					innerMap.set(blockIndex, updates)</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return [didUpdate, updatedMessageIndices]</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * count total characters in messages and total savings within this range
	 */
	private <span class="fstat-no" title="function not covered" >countCharactersAndSavingsInRange(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		startIndex: number,</span>
<span class="cstat-no" title="statement not covered" >		endIndex: number,</span>
<span class="cstat-no" title="statement not covered" >		uniqueFileReadIndices: Set&lt;number&gt;,</span>
<span class="cstat-no" title="statement not covered" >	): { totalCharacters: number; charactersSaved: number } {</span>
<span class="cstat-no" title="statement not covered" >		let totalCharCount = 0</span>
<span class="cstat-no" title="statement not covered" >		let totalCharactersSaved = 0</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		for (let i = startIndex; i &lt; endIndex; i++) {</span>
<span class="cstat-no" title="statement not covered" >			// looping over the outer indices of messages</span>
<span class="cstat-no" title="statement not covered" >			const message = apiMessages[i]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			if (!message.content) {</span>
<span class="cstat-no" title="statement not covered" >				continue</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			// hasExistingAlterations checks whether the outer idnex has any changes</span>
<span class="cstat-no" title="statement not covered" >			// hasExistingAlterations will also include the alterations we just made</span>
<span class="cstat-no" title="statement not covered" >			const hasExistingAlterations = this.contextHistoryUpdates.has(i)</span>
<span class="cstat-no" title="statement not covered" >			const hasNewAlterations = uniqueFileReadIndices.has(i)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >			if (Array.isArray(message.content)) {</span>
<span class="cstat-no" title="statement not covered" >				for (let blockIndex = 0; blockIndex &lt; message.content.length; blockIndex++) {</span>
<span class="cstat-no" title="statement not covered" >					// looping over inner indices of messages</span>
<span class="cstat-no" title="statement not covered" >					const block = message.content[blockIndex]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >					if (block.type === "text" &amp;&amp; block.text) {</span>
<span class="cstat-no" title="statement not covered" >						// true if we just altered it, or it was altered before</span>
<span class="cstat-no" title="statement not covered" >						if (hasExistingAlterations) {</span>
<span class="cstat-no" title="statement not covered" >							const innerTuple = this.contextHistoryUpdates.get(i)</span>
<span class="cstat-no" title="statement not covered" >							const updates = innerTuple?.[1].get(blockIndex) // updated text for this inner index</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >							if (updates &amp;&amp; updates.length &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >								// exists if we have an update for the message at this index</span>
<span class="cstat-no" title="statement not covered" >								const latestUpdate = updates[updates.length - 1]</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >								// if block was just altered, then calculate savings</span>
<span class="cstat-no" title="statement not covered" >								if (hasNewAlterations) {</span>
<span class="cstat-no" title="statement not covered" >									let originalTextLength</span>
<span class="cstat-no" title="statement not covered" >									if (updates.length &gt; 1) {</span>
<span class="cstat-no" title="statement not covered" >										originalTextLength = updates[updates.length - 2][2][0].length // handles case if we have multiple updates for same text block</span>
<span class="cstat-no" title="statement not covered" >									} else {</span>
<span class="cstat-no" title="statement not covered" >										originalTextLength = block.text.length</span>
<span class="cstat-no" title="statement not covered" >									}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >									const newTextLength = latestUpdate[2][0].length // replacement text</span>
<span class="cstat-no" title="statement not covered" >									totalCharactersSaved += originalTextLength - newTextLength</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >									totalCharCount += originalTextLength</span>
<span class="cstat-no" title="statement not covered" >								} else {</span>
<span class="cstat-no" title="statement not covered" >									// meaning there was an update to this text previously, but we didn't just alter it</span>
<span class="cstat-no" title="statement not covered" >									totalCharCount += latestUpdate[2][0].length</span>
<span class="cstat-no" title="statement not covered" >								}</span>
<span class="cstat-no" title="statement not covered" >							} else {</span>
<span class="cstat-no" title="statement not covered" >								// reach here if there was one inner index with an update, but now we are at a different index, so updates is not defined</span>
<span class="cstat-no" title="statement not covered" >								totalCharCount += block.text.length</span>
<span class="cstat-no" title="statement not covered" >							}</span>
<span class="cstat-no" title="statement not covered" >						} else {</span>
<span class="cstat-no" title="statement not covered" >							// reach here if there's no alterations for this outer index, meaning each inner index won't have any changes either</span>
<span class="cstat-no" title="statement not covered" >							totalCharCount += block.text.length</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					} else if (block.type === "image" &amp;&amp; block.source) {</span>
<span class="cstat-no" title="statement not covered" >						if (block.source.type === "base64" &amp;&amp; block.source.data) {</span>
<span class="cstat-no" title="statement not covered" >							totalCharCount += block.source.data.length</span>
<span class="cstat-no" title="statement not covered" >						}</span>
<span class="cstat-no" title="statement not covered" >					}</span>
<span class="cstat-no" title="statement not covered" >				}</span>
<span class="cstat-no" title="statement not covered" >			}</span>
<span class="cstat-no" title="statement not covered" >		}</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return { totalCharacters: totalCharCount, charactersSaved: totalCharactersSaved }</span>
<span class="cstat-no" title="statement not covered" >	}</span>
&nbsp;
	/**
	 * count total percentage character savings across in-range conversation
	 */
	private <span class="fstat-no" title="function not covered" >calculateContextOptimizationMetrics(</span>
<span class="cstat-no" title="statement not covered" >		apiMessages: Anthropic.Messages.MessageParam[],</span>
<span class="cstat-no" title="statement not covered" >		conversationHistoryDeletedRange: [number, number] | undefined,</span>
<span class="cstat-no" title="statement not covered" >		uniqueFileReadIndices: Set&lt;number&gt;,</span>
<span class="cstat-no" title="statement not covered" >	): number {</span>
<span class="cstat-no" title="statement not covered" >		// count for first user-assistant message pair</span>
<span class="cstat-no" title="statement not covered" >		const firstChunkResult = this.countCharactersAndSavingsInRange(apiMessages, 0, 2, uniqueFileReadIndices)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		// count for the remaining in-range messages</span>
<span class="cstat-no" title="statement not covered" >		const secondChunkResult = this.countCharactersAndSavingsInRange(</span>
<span class="cstat-no" title="statement not covered" >			apiMessages,</span>
<span class="cstat-no" title="statement not covered" >			conversationHistoryDeletedRange ? conversationHistoryDeletedRange[1] + 1 : 2,</span>
<span class="cstat-no" title="statement not covered" >			apiMessages.length,</span>
<span class="cstat-no" title="statement not covered" >			uniqueFileReadIndices,</span>
<span class="cstat-no" title="statement not covered" >		)</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		const totalCharacters = firstChunkResult.totalCharacters + secondChunkResult.totalCharacters</span>
<span class="cstat-no" title="statement not covered" >		const totalCharactersSaved = firstChunkResult.charactersSaved + secondChunkResult.charactersSaved</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		const percentCharactersSaved = totalCharacters === 0 ? 0 : totalCharactersSaved / totalCharacters</span>
<span class="cstat-no" title="statement not covered" ></span>
<span class="cstat-no" title="statement not covered" >		return percentCharactersSaved</span>
<span class="cstat-no" title="statement not covered" >	}</span>
}
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-06-11T15:11:48.959Z
            </div>
        <script src="../../../../../../../../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../../../../../../../../sorter.js"></script>
        <script src="../../../../../../../../../../../../../block-navigation.js"></script>
    </body>
</html>
    